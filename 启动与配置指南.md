# å¯åŠ¨ä¸é…ç½®æŒ‡å—

> **ç‰ˆæœ¬**: v1.5.0-final  
> **æ—¥æœŸ**: 2026-02-17  
> **é€‚ç”¨ç³»ç»Ÿ**: Windows / Linux / macOS

---

## ç›®å½•

1. [å¿«é€Ÿå¼€å§‹](#1-å¿«é€Ÿå¼€å§‹)
2. [ç³»ç»Ÿè¦æ±‚](#2-ç³»ç»Ÿè¦æ±‚)
3. [å®‰è£…æ­¥éª¤](#3-å®‰è£…æ­¥éª¤)
4. [å¯åŠ¨æ–¹å¼](#4-å¯åŠ¨æ–¹å¼)
5. [é…ç½®è¯´æ˜](#5-é…ç½®è¯´æ˜)
6. [éªŒè¯éƒ¨ç½²](#6-éªŒè¯éƒ¨ç½²)
7. [æ•…éšœæ’æŸ¥](#7-æ•…éšœæ’æŸ¥)
8. [æ€§èƒ½è°ƒä¼˜](#8-æ€§èƒ½è°ƒä¼˜)

---

## 1. å¿«é€Ÿå¼€å§‹

### 1.1 ä¸€é”®å¯åŠ¨ (æ¨è)

```bash
# å…‹éš†å¹¶å¯åŠ¨
git clone https://github.com/Cognitive-Architect/Hajimi-Code-Ultra.git
cd Hajimi-Code-Ultra
git checkout v1.5.0-final
npm install
npm run start:lazy-rag
```

### 1.2 éªŒè¯å¯åŠ¨æˆåŠŸ

```bash
# å¥åº·æ£€æŸ¥
curl http://localhost:3456/health

# é¢„æœŸè¾“å‡º
{
  "status": "ok",
  "pid": 12345,
  "uptime": 3600,
  "memory": {...},
  "index": {"dim": 1536, "path": "..."}
}
```

---

## 2. ç³»ç»Ÿè¦æ±‚

### 2.1 æœ€ä½é…ç½®

| ç»„ä»¶ | è¦æ±‚ |
|:-----|:-----|
| **Node.js** | v18.0.0+ |
| **å†…å­˜** | 2 GB RAM |
| **ç£ç›˜** | 1 GB å¯ç”¨ç©ºé—´ |
| **ç½‘ç»œ** | å¯é€‰ (æ”¯æŒç¦»çº¿è¿è¡Œ) |

### 2.2 æ¨èé…ç½®

| ç»„ä»¶ | è¦æ±‚ |
|:-----|:-----|
| **Node.js** | v20.10.0+ (LTS) |
| **å†…å­˜** | 4 GB RAM |
| **ç£ç›˜** | 5 GB å¯ç”¨ç©ºé—´ (å«æ—¥å¿—å’Œç´¢å¼•) |
| **CPU** | 4æ ¸ä»¥ä¸Š |

### 2.3 æ”¯æŒå¹³å°

| å¹³å° | ç‰ˆæœ¬ | çŠ¶æ€ |
|:-----|:-----|:----:|
| **Windows** | 10/11 | âœ… å®Œå…¨æ”¯æŒ |
| **Linux** | Ubuntu 20.04+ / CentOS 8+ | âœ… å®Œå…¨æ”¯æŒ |
| **macOS** | 12+ (Intel/Apple Silicon) | âœ… å®Œå…¨æ”¯æŒ |

---

## 3. å®‰è£…æ­¥éª¤

### 3.1 å®‰è£… Node.js

```bash
# ä½¿ç”¨ nvm (æ¨è)
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.0/install.sh | bash
nvm install 20
nvm use 20

# éªŒè¯å®‰è£…
node --version  # v20.10.0
npm --version   # 10.2.3
```

### 3.2 å…‹éš†ä»“åº“

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/Cognitive-Architect/Hajimi-Code-Ultra.git

# è¿›å…¥ç›®å½•
cd Hajimi-Code-Ultra

# åˆ‡æ¢åˆ°v1.5.0-finalæ ‡ç­¾
git checkout v1.5.0-final
```

### 3.3 å®‰è£…ä¾èµ–

```bash
# å®‰è£…é¡¹ç›®ä¾èµ–
npm install

# éªŒè¯ç±»å‹æ£€æŸ¥
npx tsc --noEmit

# è¿è¡Œæµ‹è¯•
npm test
```

---

## 4. å¯åŠ¨æ–¹å¼

### 4.1 æ–¹å¼ä¸€: npmè„šæœ¬ (æ¨è)

```bash
# å¯åŠ¨Lazy-RAG Server
npm run start:lazy-rag

# è¿è¡Œæ€§èƒ½åŸºå‡†æµ‹è¯•
npm run benchmark:lazy-rag
```

### 4.2 æ–¹å¼äºŒ: å¹³å°è„šæœ¬

#### Linux / macOS

```bash
# åŸºæœ¬å¯åŠ¨
./scripts/start-lazy-rag.sh

# è‡ªå®šä¹‰ç«¯å£
./scripts/start-lazy-rag.sh --port 8080

# å¼€å‘æ¨¡å¼ (è‡ªåŠ¨é‡è½½)
./scripts/start-lazy-rag.sh --dev

# å®Œæ•´å‚æ•°
./scripts/start-lazy-rag.sh --port 8080 --host 127.0.0.1 --storage /custom/path
```

#### Windows

```powershell
# åŸºæœ¬å¯åŠ¨
.\scripts\start-lazy-rag.ps1

# è‡ªå®šä¹‰ç«¯å£
.\scripts\start-lazy-rag.ps1 -Port 8080

# å¼€å‘æ¨¡å¼
.\scripts\start-lazy-rag.ps1 -Dev

# å®Œæ•´å‚æ•°
.\scripts\start-lazy-rag.ps1 -Port 8080 -Host "127.0.0.1" -StoragePath "C:\custom\path"
```

### 4.3 æ–¹å¼ä¸‰: æ‰‹åŠ¨å¯åŠ¨

```bash
# è¿›å…¥æœåŠ¡ç›®å½•
cd server/lazy-rag

# å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨æœåŠ¡
npm start

# æˆ–å¼€å‘æ¨¡å¼
npm run dev
```

### 4.4 åå°è¿è¡Œ

#### Linux (systemd)

```ini
# /etc/systemd/system/lazy-rag.service
[Unit]
Description=Lazy-RAG Server
After=network.target

[Service]
Type=simple
User=hajimi
WorkingDirectory=/opt/hajimi/server/lazy-rag
ExecStart=/usr/bin/npm start
Restart=always
RestartSec=10

[Install]
WantedBy=multi-user.target
```

```bash
# å¯ç”¨å¹¶å¯åŠ¨æœåŠ¡
sudo systemctl enable lazy-rag
sudo systemctl start lazy-rag
sudo systemctl status lazy-rag
```

#### Windows (æœåŠ¡)

```powershell
# ä½¿ç”¨ nssm åˆ›å»ºæœåŠ¡
nssm install LazyRAG "C:\Program Files\nodejs\node.exe"
nssm set LazyRAG AppDirectory "C:\Hajimi\server\lazy-rag"
nssm set LazyRAG AppParameters "index.ts"
nssm start LazyRAG
```

---

## 5. é…ç½®è¯´æ˜

### 5.1 ç¯å¢ƒå˜é‡

| å˜é‡å | è¯´æ˜ | é»˜è®¤å€¼ | ç¤ºä¾‹ |
|:-----|:-----|:-------|:-----|
| `LAZY_RAG_PORT` | æœåŠ¡ç«¯å£ | 3456 | `8080` |
| `LAZY_RAG_HOST` | æœåŠ¡ä¸»æœº | 0.0.0.0 | `127.0.0.1` |
| `LAZY_RAG_STORAGE` | æ•°æ®å­˜å‚¨è·¯å¾„ | `./storage/lazy-rag` | `/data/lazy-rag` |
| `NODE_ENV` | è¿è¡Œç¯å¢ƒ | `production` | `development` |

### 5.2 é…ç½®æ–‡ä»¶

```json
// server/lazy-rag/config.json
{
  "server": {
    "port": 3456,
    "host": "0.0.0.0"
  },
  "storage": {
    "path": "./storage/lazy-rag",
    "autoSave": true,
    "saveInterval": 300000
  },
  "hnsw": {
    "dim": 1536,
    "maxElements": 10000,
    "M": 16,
    "efConstruction": 200,
    "efSearch": 50
  },
  "performance": {
    "timeout": 2000,
    "maxTopK": 100
  }
}
```

### 5.3 è·¨å¹³å°å­˜å‚¨è·¯å¾„

| å¹³å° | é»˜è®¤è·¯å¾„ |
|:-----|:---------|
| Windows | `%APPDATA%/Hajimi-RAG/data/` |
| Linux | `~/.config/hajimi-rag/data/` |
| macOS | `~/Library/Application Support/Hajimi-RAG/data/` |

---

## 6. éªŒè¯éƒ¨ç½²

### 6.1 å¥åº·æ£€æŸ¥

```bash
# æ£€æŸ¥æœåŠ¡çŠ¶æ€
curl http://localhost:3456/health

# é¢„æœŸå“åº”
{
  "status": "ok",
  "pid": 12345,
  "uptime": 3600.123,
  "memory": {
    "rss": 85000000,
    "heapTotal": 45000000,
    "heapUsed": 35000000
  },
  "index": {
    "dim": 1536,
    "path": ".../storage/lazy-rag/hnsw_index.bin"
  }
}
```

### 6.2 APIæµ‹è¯•

```bash
# å‘é‡æ£€ç´¢æŸ¥è¯¢
curl -X POST http://localhost:3456/query \
  -H "Content-Type: application/json" \
  -d '{
    "embedding": [0.1, 0.2, 0.3, 0.4, 0.5, ...],  # 1536ç»´
    "topK": 5
  }'

# é¢„æœŸå“åº”
{
  "success": true,
  "results": [
    {"id": "doc-001", "score": 0.92},
    {"id": "doc-002", "score": 0.87},
    {"id": "doc-003", "score": 0.83}
  ],
  "latency": 85
}
```

### 6.3 æ€§èƒ½åŸºå‡†æµ‹è¯•

```bash
# è¿è¡Œå®Œæ•´åŸºå‡†æµ‹è¯•
npm run benchmark:lazy-rag

# é¢„æœŸè¾“å‡º
================================================================
  Lazy-RAG æ€§èƒ½åŸºå‡†æµ‹è¯•å¥—ä»¶
================================================================

ğŸ“Š [BENCH-001] å†·å¯åŠ¨æµ‹è¯•
  å¹³å‡å†·å¯åŠ¨: 2456.78ms
  é˜ˆå€¼: 5000ms
  ç»“æœ: âœ… PASS

ğŸ“Š [BENCH-003] æ ‡å‡†è´Ÿè½½æµ‹è¯• (10,000å‘é‡)
  P95å»¶è¿Ÿ: 92.45ms
  é˜ˆå€¼: 100ms
  ç»“æœ: âœ… PASS

[DECISION] âœ… Lazy-RAGè¾¾æ ‡ï¼Œå€ºåŠ¡æ¸…é›¶
[PLAN] A - ç”Ÿäº§å°±ç»ª
================================================================
```

---

## 7. æ•…éšœæ’æŸ¥

### 7.1 å¸¸è§é—®é¢˜

#### Q: ç«¯å£è¢«å ç”¨

```bash
# é”™è¯¯ä¿¡æ¯: Error: listen EADDRINUSE: address already in use :::3456

# è§£å†³æ–¹æ¡ˆ1: æ›´æ¢ç«¯å£
export LAZY_RAG_PORT=8080
npm run start:lazy-rag

# è§£å†³æ–¹æ¡ˆ2: æŸ¥æ‰¾å¹¶ç»ˆæ­¢å ç”¨è¿›ç¨‹
# Linux/macOS
lsof -i :3456
kill -9 <PID>

# Windows
netstat -ano | findstr :3456
taskkill /PID <PID> /F
```

#### Q: HNSWåº“å®‰è£…å¤±è´¥

```bash
# é”™è¯¯ä¿¡æ¯: Cannot find module 'hnswlib-node'

# è§£å†³æ–¹æ¡ˆ
cd server/lazy-rag
npm install hnswlib-node --build-from-source

# æˆ–
cd server/lazy-rag
npm install
npm rebuild hnswlib-node
```

#### Q: æƒé™ä¸è¶³

```bash
# é”™è¯¯ä¿¡æ¯: EACCES: permission denied

# è§£å†³æ–¹æ¡ˆ1: æ›´æ”¹å­˜å‚¨ç›®å½•æƒé™
chmod -R 755 ./storage

# è§£å†³æ–¹æ¡ˆ2: ä½¿ç”¨è‡ªå®šä¹‰å­˜å‚¨è·¯å¾„
export LAZY_RAG_STORAGE=/path/with/write/permission
npm run start:lazy-rag
```

#### Q: å†…å­˜ä¸è¶³

```bash
# é”™è¯¯ä¿¡æ¯: JavaScript heap out of memory

# è§£å†³æ–¹æ¡ˆ: å¢åŠ Node.jså†…å­˜é™åˆ¶
export NODE_OPTIONS="--max-old-space-size=4096"
npm run start:lazy-rag
```

### 7.2 æ—¥å¿—æŸ¥çœ‹

```bash
# æœåŠ¡æ—¥å¿—
tail -f server/lazy-rag/server.log

# æˆ–ä½¿ç”¨journald
sudo journalctl -u lazy-rag -f
```

### 7.3 è°ƒè¯•æ¨¡å¼

```bash
# å¯ç”¨è°ƒè¯•æ—¥å¿—
export DEBUG=lazy-rag:*
npm run start:lazy-rag
```

---

## 8. æ€§èƒ½è°ƒä¼˜

### 8.1 HNSWå‚æ•°è°ƒä¼˜

| å‚æ•° | è¯´æ˜ | å°æ•°æ®é›†(<1K) | ä¸­æ•°æ®é›†(1K-10K) | å¤§æ•°æ®é›†(>10K) |
|:-----|:-----|:-------------:|:----------------:|:--------------:|
| `M` | æ¯å±‚æœ€å¤§è¿æ¥æ•° | 8 | 16 | 32 |
| `efConstruction` | æ„å»ºæ—¶æœç´¢èŒƒå›´ | 100 | 200 | 400 |
| `efSearch` | æŸ¥è¯¢æ—¶æœç´¢èŒƒå›´ | 32 | 64 | 128 |

### 8.2 å†…å­˜ä¼˜åŒ–

```bash
# é™åˆ¶Node.jså†…å­˜ä½¿ç”¨
export NODE_OPTIONS="--max-old-space-size=512"

# å¯ç”¨GCæ—¥å¿—
export NODE_OPTIONS="--trace-gc"
```

### 8.3 æ€§èƒ½ç›‘æ§

```bash
# æŸ¥çœ‹å®æ—¶æ€§èƒ½æŒ‡æ ‡
curl http://localhost:3456/metrics

# æˆ–æŸ¥çœ‹æ—¥å¿—ä¸­çš„[PERF]æ ‡è®°
grep "\[PERF\]" server/lazy-rag/server.log
```

---

## é™„å½•

### A. ç›®å½•ç»“æ„

```
Hajimi-Code-Ultra/
â”œâ”€â”€ server/lazy-rag/           # Lazy-RAGæœåŠ¡
â”‚   â”œâ”€â”€ index.ts               # ä¸»æœåŠ¡
â”‚   â”œâ”€â”€ package.json           # ä¾èµ–
â”‚   â””â”€â”€ server.log             # è¿è¡Œæ—¥å¿—
â”œâ”€â”€ lib/lcr/types/             # TypeScriptç±»å‹
â”‚   â””â”€â”€ lazy-rag.ts            # æ¥å£å®šä¹‰
â”œâ”€â”€ scripts/                   # å¯åŠ¨è„šæœ¬
â”‚   â”œâ”€â”€ start-lazy-rag.sh      # Linux/macOS
â”‚   â””â”€â”€ start-lazy-rag.ps1     # Windows
â”œâ”€â”€ storage/lazy-rag/          # æ•°æ®å­˜å‚¨
â”‚   â”œâ”€â”€ hnsw_index.bin         # HNSWç´¢å¼•
â”‚   â””â”€â”€ server.log             # æ—¥å¿—
â””â”€â”€ tests/                     # æµ‹è¯•æ–‡ä»¶
    â””â”€â”€ lazy-rag-benchmark.ts  # åŸºå‡†æµ‹è¯•
```

### B. æ›´æ–°æ—¥å¿—

| æ—¥æœŸ | ç‰ˆæœ¬ | å˜æ›´ |
|:-----|:-----|:-----|
| 2026-02-17 | v1.5.0-final | åˆå§‹ç‰ˆæœ¬ |

---

*æ–‡æ¡£ç‰ˆæœ¬: v1.0.0*  
*æ›´æ–°æ—¥æœŸ: 2026-02-17*  
*çŠ¶æ€: ç”Ÿäº§å°±ç»ª âœ…*
