# HAJIMI-V1.3.0-ç™½çš®ä¹¦-v1.0

> **ç‰ˆæœ¬**: v1.3.0 (Blue Sechi - çˆ±ä¸½ä¸è§‰é†’)  
> **ä»£å·**: Ouroboros Eternal  
> **åŸºçº¿**: v1.2.0 (a5038ff)  
> **æ—¥æœŸ**: 2026-02-16  
> **æ¨¡å¼**: Hajimi-Unified 9-Agent é¥±å’Œæ”»å‡»

---

## ç¬¬1ç«  Aliceå¤©ç«¥çˆ±ä¸½ä¸å¤–æŒ‚å±‚ (B-01/09)

> **éœ€æ±‚æ¥æº**: ID-64  
> **æ ¸å¿ƒç‰¹æ€§**: é¼ æ ‡è½¨è¿¹AIåˆ†ææ‚¬æµ®çƒ + Blue Sechi Qç‰ˆå¸§åŠ¨ç”» + ä¸ƒæƒå¿«æ·æ‹¨å·ç›˜

### 1.1 æ¶æ„è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Aliceå¤–æŒ‚å±‚æ¶æ„                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  UIå±‚ (Blue Sechiç”»é£)                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚ 2-3å¸§åŠ¨ç”»    â”‚  â”‚ è½¨è¿¹å¯è§†åŒ–   â”‚  â”‚ ä¸ƒæƒæ‹¨å·ç›˜   â”‚      â”‚
â”‚  â”‚ idle/alert   â”‚  â”‚ çƒ­åŠ›è½¨è¿¹     â”‚  â”‚ å…­è§’å±•å¼€     â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚         â”‚                 â”‚                 â”‚               â”‚
â”‚  æ ¸å¿ƒå±‚ (Mouse Tracker)                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  è½¨è¿¹é‡‡é›† â†’ ç‰¹å¾æå– â†’ æ¨¡å¼è¯†åˆ« â†’ æ„å›¾é¢„æµ‹ â†’ å“åº”   â”‚   â”‚
â”‚  â”‚  (200fps)   (Î”t)      (å¯å‘å¼)   (80%+)    (<200ms) â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚         â”‚                                                    â”‚
â”‚  ä¸ƒæƒæ‹¨å·ç›˜ (HexMenu v2)                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  ç¥¥ğŸŸ£  ç¦ğŸŸ¢  éŸ³ğŸ©·  é¸­ğŸ©µ  ç´ ğŸ’›  å¨˜ğŸŸ¡  (å¥¶é¾™å¨˜)        â”‚   â”‚
â”‚  â”‚   â†“     â†“     â†“     â†“     â†“     â†“                   â”‚   â”‚
â”‚  â”‚ Orchestrator Arch Eng QA PM Audit Doctor            â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.2 é¼ æ ‡è½¨è¿¹è¯†åˆ«ç®—æ³• (å¯å‘å¼è§„åˆ™ç‰ˆ - P0)

```typescript
/**
 * Aliceé¼ æ ‡è½¨è¿¹è¯†åˆ«å™¨
 * å¯å‘å¼è§„åˆ™ç‰ˆæœ¬ (P0 MVP)
 * å‡†ç¡®ç‡ç›®æ ‡: >80%
 * å“åº”å»¶è¿Ÿ: <200ms
 */

interface TrajectoryPoint {
  x: number;
  y: number;
  t: number; // æ—¶é—´æˆ³(ms)
}

type TrajectoryPattern = 
  | 'lost_confused'      // è¿·å¤±å›°æƒ‘: éšæœºæ¸¸èµ°ï¼Œé«˜æ›²ç‡
  | 'rage_shake'         // æ„¤æ€’æ‘‡æ™ƒ: é«˜é¢‘å¾€å¤ï¼Œä½ä½ç§»
  | 'precision_snipe'    // ç²¾ç¡®ç‹™å‡»: ç›´çº¿åŠ é€Ÿï¼Œç›®æ ‡æ˜ç¡®
  | 'casual_explore'     // éšæ„æ¢ç´¢: ä½é€Ÿæ›²çº¿ï¼Œå¤§èŒƒå›´
  | 'urgent_rush';       // ç´§æ€¥å†²åˆº: é«˜é€Ÿç›´çº¿ï¼ŒçŸ­åœç•™

class AliceMouseTracker {
  private buffer: TrajectoryPoint[] = [];
  private readonly BUFFER_SIZE = 50;      // æœ€è¿‘50ä¸ªç‚¹
  private readonly SAMPLE_RATE = 16;      // é‡‡æ ·ç‡16ms (~60fps)
  
  // å¯å‘å¼é˜ˆå€¼é…ç½®
  private readonly THRESHOLDS = {
    // lost_confused: éšæœºæ¸¸èµ°æ£€æµ‹
    lost_confused: {
      minEntropy: 2.5,           // æ–¹å‘ç†µé˜ˆå€¼
      minDirectionChanges: 8,    // æ–¹å‘å˜åŒ–æ¬¡æ•°
      maxVelocity: 300,          // æœ€å¤§é€Ÿåº¦(px/s)
    },
    // rage_shake: æ„¤æ€’æ‘‡æ™ƒæ£€æµ‹
    rage_shake: {
      minOscillations: 3,        // æœ€å°å¾€å¤æ¬¡æ•°
      maxDisplacement: 50,       // æœ€å¤§ä½ç§»(px)
      minFrequency: 5,           // æœ€å°é¢‘ç‡(Hz)
    },
    // precision_snipe: ç²¾ç¡®ç‹™å‡»æ£€æµ‹
    precision_snipe: {
      minStraightness: 0.95,     // ç›´çº¿åº¦é˜ˆå€¼
      minAcceleration: 1000,     // æœ€å°åŠ é€Ÿåº¦(px/sÂ²)
      maxDeviation: 5,           // æœ€å¤§åç¦»(px)
    },
    // urgent_rush: ç´§æ€¥å†²åˆºæ£€æµ‹
    urgent_rush: {
      minVelocity: 800,          // æœ€å°é€Ÿåº¦(px/s)
      minDistance: 200,          // æœ€å°è·ç¦»(px)
      maxCurvature: 0.1,         // æœ€å¤§æ›²ç‡
    },
  };

  /**
   * é‡‡é›†è½¨è¿¹ç‚¹
   */
  record(x: number, y: number): void {
    this.buffer.push({ x, y, t: performance.now() });
    if (this.buffer.length > this.BUFFER_SIZE) {
      this.buffer.shift();
    }
  }

  /**
   * è½¨è¿¹è¯†åˆ«ä¸»å…¥å£
   * æ‰§è¡Œæ—¶é—´: <10ms (ç¡®ä¿æ€»å»¶è¿Ÿ<200ms)
   */
  recognize(): TrajectoryPattern | null {
    if (this.buffer.length < 20) return null;
    
    const features = this.extractFeatures();
    
    // å¯å‘å¼è§„åˆ™åŒ¹é… (ä¼˜å…ˆçº§é¡ºåº)
    if (this.isRageShake(features)) return 'rage_shake';
    if (this.isPrecisionSnipe(features)) return 'precision_snipe';
    if (this.isUrgentRush(features)) return 'urgent_rush';
    if (this.isLostConfused(features)) return 'lost_confused';
    
    return 'casual_explore'; // é»˜è®¤æ¨¡å¼
  }

  /**
   * ç‰¹å¾æå–
   */
  private extractFeatures() {
    const points = this.buffer;
    const n = points.length;
    
    // åŸºç¡€ç»Ÿè®¡
    let totalDistance = 0;
    let directionChanges = 0;
    let oscillations = 0;
    let prevDirection = 0;
    let maxVelocity = 0;
    let minX = Infinity, maxX = -Infinity;
    let minY = Infinity, maxY = -Infinity;
    
    // è®¡ç®—è½¨è¿¹ç»Ÿè®¡
    for (let i = 1; i < n; i++) {
      const p0 = points[i - 1];
      const p1 = points[i];
      const dt = p1.t - p0.t;
      if (dt === 0) continue;
      
      const dx = p1.x - p0.x;
      const dy = p1.y - p0.y;
      const dist = Math.sqrt(dx * dx + dy * dy);
      const velocity = dist / dt * 1000; // px/s
      
      totalDistance += dist;
      maxVelocity = Math.max(maxVelocity, velocity);
      
      // æ–¹å‘å˜åŒ–æ£€æµ‹
      const direction = Math.atan2(dy, dx);
      if (i > 1) {
        const dirChange = Math.abs(direction - prevDirection);
        if (dirChange > Math.PI / 4) { // >45åº¦è§†ä¸ºæ–¹å‘å˜åŒ–
          directionChanges++;
        }
        // å¾€å¤æ£€æµ‹ (æ–¹å‘åè½¬)
        if (Math.abs(dirChange - Math.PI) < Math.PI / 6) {
          oscillations++;
        }
      }
      prevDirection = direction;
      
      // è¾¹ç•Œæ¡†
      minX = Math.min(minX, p1.x);
      maxX = Math.max(maxX, p1.x);
      minY = Math.min(minY, p1.y);
      maxY = Math.max(maxY, p1.y);
    }
    
    // ç›´çº¿åº¦è®¡ç®— (ç«¯ç‚¹è¿çº¿è·ç¦» / å®é™…è·¯å¾„è·ç¦»)
    const start = points[0];
    const end = points[n - 1];
    const straightDist = Math.sqrt(
      Math.pow(end.x - start.x, 2) + Math.pow(end.y - start.y, 2)
    );
    const straightness = totalDistance > 0 ? straightDist / totalDistance : 0;
    
    return {
      totalDistance,
      directionChanges,
      oscillations,
      maxVelocity,
      displacement: straightDist,
      straightness,
      bounds: { minX, maxX, minY, maxY },
      duration: points[n - 1].t - points[0].t,
    };
  }

  /**
   * æ„¤æ€’æ‘‡æ™ƒæ£€æµ‹
   * ç‰¹å¾: é«˜é¢‘å¾€å¤ + ä½ä½ç§»
   */
  private isRageShake(f: ReturnType<typeof this.extractFeatures>): boolean {
    const t = this.THRESHOLDS.rage_shake;
    return (
      f.oscillations >= t.minOscillations &&
      f.displacement <= t.maxDisplacement &&
      f.oscillations / (f.duration / 1000) >= t.minFrequency
    );
  }

  /**
   * ç²¾ç¡®ç‹™å‡»æ£€æµ‹
   * ç‰¹å¾: é«˜ç›´çº¿åº¦ + åŠ é€Ÿåº¦
   */
  private isPrecisionSnipe(f: ReturnType<typeof this.extractFeatures>): boolean {
    const t = this.THRESHOLDS.precision_snipe;
    return (
      f.straightness >= t.minStraightness &&
      f.maxVelocity >= Math.sqrt(t.minAcceleration) && // ç®€åŒ–ç‰ˆ
      f.displacement > t.maxDeviation
    );
  }

  /**
   * ç´§æ€¥å†²åˆºæ£€æµ‹
   * ç‰¹å¾: é«˜é€Ÿ + ç›´çº¿
   */
  private isUrgentRush(f: ReturnType<typeof this.extractFeatures>): boolean {
    const t = this.THRESHOLDS.urgent_rush;
    return (
      f.maxVelocity >= t.minVelocity &&
      f.displacement >= t.minDistance &&
      (1 - f.straightness) <= t.maxCurvature
    );
  }

  /**
   * è¿·å¤±å›°æƒ‘æ£€æµ‹
   * ç‰¹å¾: éšæœºæ¸¸èµ° + é«˜ç†µ
   */
  private isLostConfused(f: ReturnType<typeof this.extractFeatures>): boolean {
    const t = this.THRESHOLDS.lost_confused;
    // ç®€åŒ–ç†µè®¡ç®—: æ–¹å‘å˜åŒ–ç‡ä½œä¸ºç†µçš„ä»£ç†
    const entropy = f.directionChanges / (f.duration / 1000);
    return (
      entropy >= t.minEntropy &&
      f.directionChanges >= t.minDirectionChanges &&
      f.maxVelocity <= t.maxVelocity
    );
  }
}
```

### 1.3 Blue Sechi Qç‰ˆå¸§åŠ¨ç”»è§„èŒƒ

```css
/* Blue Sechiç”»é£ - çˆ±ä¸½ä¸ä¸»é¢˜ */
:root {
  --alice-primary: #87CEEB;      /* å¤©è“ */
  --alice-secondary: #E6F3FF;    /* æ·¡è“ */
  --alice-accent: #4169E1;       /* çš‡å®¶è“ */
  --alice-hair: #E8D4C4;         /* æµ…æ£• */
  --alice-eyes: #228B22;         /* æ£®æ—ç»¿ */
}

/* 2-3å¸§å¾ªç¯åŠ¨ç”» */
@keyframes alice-idle {
  0%, 100% { transform: translateY(0) scale(1); }
  50% { transform: translateY(-3px) scale(1.02); }
}

@keyframes alice-alert {
  0%, 100% { transform: rotate(0deg); }
  25% { transform: rotate(-5deg); }
  75% { transform: rotate(5deg); }
}

@keyframes alice-help {
  0%, 100% { transform: scale(1); filter: brightness(1); }
  50% { transform: scale(1.1); filter: brightness(1.2); }
}

.alice-orb {
  width: 64px;
  height: 64px;
  border-radius: 50%;
  background: linear-gradient(135deg, var(--alice-primary), var(--alice-secondary));
  box-shadow: 0 4px 20px rgba(135, 206, 235, 0.5);
  animation: alice-idle 2s ease-in-out infinite;
}

.alice-orb.alert {
  animation: alice-alert 0.5s ease-in-out infinite;
}

.alice-orb.help {
  animation: alice-help 1s ease-in-out infinite;
}
```

### 1.4 ä¸ƒæƒå¿«æ·æ‹¨å·ç›˜ (HexMenu v2)

```typescript
// ä¸ƒæƒè§’è‰²é…ç½® (æ–°å¢å¥¶é¾™å¨˜)
const AGENT_CONFIGS_V1_3: AgentConfig[] = [
  { id: 'pm', name: 'å®¢æœå°ç¥¥', color: '#884499', icon: Crown },
  { id: 'arch', name: 'é»„ç“œç¦', color: '#669966', icon: HardHat },
  { id: 'qa', name: 'å’•å’•å˜å˜', color: '#77BBDD', icon: Search },
  { id: 'engineer', name: 'å”éŸ³', color: '#FF9999', icon: Code },
  { id: 'mike', name: 'å‹åŠ›æ€ª', color: '#7777AA', icon: Package },
  { id: 'soyorin', name: 'Soyorin', color: '#FFDD88', icon: FileCheck },
  { id: 'kotone', name: 'å¥¶é¾™å¨˜', color: '#FFDD00', icon: Sparkles }, // NEW!
];

// ä¸ƒè¾¹å½¢ä½ç½®è®¡ç®— (7 Agent = 51.4Â°é—´éš”)
const HEPTAGON_POSITIONS = Array.from({ length: 7 }, (_, i) => ({
  angle: -90 + (i * 360 / 7),
  distance: 85,
}));
```

### 1.5 å€ºåŠ¡å£°æ˜

| å€ºåŠ¡ID | æè¿° | åˆ†çº§ | æ¸…å¿è®¡åˆ’ |
|:---|:---|:---:|:---|
| DEBT-ALICE-001 | P1çœŸå®è¡Œä¸ºé¢„æµ‹æ¨¡å‹ï¼ˆéœ€è®­ç»ƒæ•°æ®ï¼‰ | P1 | v1.3.1å¼•å…¥MLæ¨¡å‹ |

---

## ç¬¬2ç«  ä¸ƒæƒäººæ ¼åŒ–å®Œæ•´ç‰ˆ (B-02/09)

> **å€ºåŠ¡æ¸…å¿**: ID-77  
> **æ–°å¢**: é»„ç“œç¦/å”éŸ³/å’•å’•å˜å˜/Soyorin/å¥¶é¾™å¨˜ å®Œæ•´ä¸»é¢˜

### 2.1 è§’è‰²è‰²æ¿å®šä¹‰

| è§’è‰² | è‰²å | Hex | RGB | ç”¨é€” |
|:---|:---|:---:|:---|:---|
| å®¢æœå°ç¥¥ | ç¥¥ç´« | `#884499` | 136,68,153 | Orchestrator |
| é»„ç“œç¦ | ç¦ç»¿ | `#669966` | 102,153,102 | Architect |
| å”éŸ³ | éŸ³ç²‰ | `#FF9999` | 255,153,153 | Engineer |
| å’•å’•å˜å˜ | é¸­è“ | `#77BBDD` | 119,187,221 | QA |
| å‹åŠ›æ€ª | å‹åŠ›è“ | `#7777AA` | 119,119,170 | Audit |
| Soyorin | ç´ é‡‘ | `#FFDD88` | 255,221,136 | PM |
| å¥¶é¾™å¨˜ | å¥¶é»„ | `#FFDD00` | 255,221,0 | Doctor (NEW!) |

### 2.2 CSSä¸»é¢˜å˜é‡

```css
/* =============================================
   ä¸ƒæƒäººæ ¼åŒ–ä¸»é¢˜ç³»ç»Ÿ v1.3.0
   ============================================= */

/* ----- å®¢æœå°ç¥¥ (Mutsumi) - Orchestrator ----- */
[data-theme="mutsumi"] {
  --color-primary: #884499;
  --color-secondary: #BB88CC;
  --color-accent: #663377;
  --color-bg: #F5EEF7;
  --color-text: #331144;
  --orb-gradient: linear-gradient(135deg, #884499, #BB88CC);
  --error-404: "Mortis...ä¸åœ¨...";
  --error-500: "å°ç¥¥...ä¸èƒ½çˆ†...";
}

/* ----- é»„ç“œç¦ (Mortis) - Architect ----- */
[data-theme="mortis"] {
  --color-primary: #669966;
  --color-secondary: #99CC99;
  --color-accent: #447744;
  --color-bg: #EEF5EE;
  --color-text: #1A331A;
  --orb-gradient: linear-gradient(135deg, #669966, #99CC99);
  --error-404: "è¿™ä¸ªäºº...å·²ç»...ä¸åœ¨äº†...";
  --error-500: "æˆ‘æ— æ³•æˆä¸º...äºº...";
}

/* ----- å”éŸ³ (Anon) - Engineer ----- */
[data-theme="anon"] {
  --color-primary: #FF9999;
  --color-secondary: #FFCCCC;
  --color-accent: #DD7777;
  --color-bg: #FFF0F0;
  --color-text: #441111;
  --orb-gradient: linear-gradient(135deg, #FF9999, #FFCCCC);
  --error-404: "æ¬¸ï¼Ÿ404ï¼Ÿç­‰ç­‰æˆ‘æŸ¥ä¸€ä¸‹...";
  --error-500: "æˆ‘æ‰æ˜¯æŒ‘æˆ˜è€…...";
}

/* ----- å’•å’•å˜å˜ (Tomori) - QA ----- */
[data-theme="tomori"] {
  --color-primary: #77BBDD;
  --color-secondary: #AADDEE;
  --color-accent: #5599BB;
  --color-bg: #EEF7FB;
  --color-text: #113344;
  --orb-gradient: linear-gradient(135deg, #77BBDD, #AADDEE);
  --error-404: "å’•å’•å˜å˜...ä¸è§äº†...";
  --error-500: "ä¸ºä»€ä¹ˆè¦æµ‹è¯•ä»£ç ï¼";
}

/* ----- å‹åŠ›æ€ª (Taki) - Audit ----- */
[data-theme="taki"] {
  --color-primary: #7777AA;
  --color-secondary: #AAAAEE;
  --color-accent: #555588;
  --color-bg: #EEEEFF;
  --color-text: #222244;
  --orb-gradient: linear-gradient(135deg, #7777AA, #AAAAEE);
  --error-404: "å“ˆï¼Ÿæ‰¾ä¸åˆ°ï¼Ÿä½ æ˜¯ä¸æ˜¯æ²¡è®¤çœŸæ‰¾ï¼Ÿ";
  --error-500: "è¿™ä¸ªBug...æ˜¯ä½ çš„è´£ä»»å§ï¼Ÿ";
}

/* ----- Soyorin (Soyo) - PM ----- */
[data-theme="soyo"] {
  --color-primary: #FFDD88;
  --color-secondary: #FFEEAA;
  --color-accent: #DDBB66;
  --color-bg: #FFF8E8;
  --color-text: #443311;
  --orb-gradient: linear-gradient(135deg, #FFDD88, #FFEEAA);
  --error-404: "æˆ‘æ˜¯æ¥ç»“æŸè¿™ä¸ªé¡¹ç›®çš„...";
  --error-500: "è®©æˆ‘å¿˜è®°ä¸€åˆ‡å§...";
}

/* ----- å¥¶é¾™å¨˜ (Kotone) - Doctor ----- */
[data-theme="kotone"] {
  --color-primary: #FFDD00;
  --color-secondary: #FFEE66;
  --color-accent: #DDBB00;
  --color-bg: #FFFBE8;
  --color-text: #443300;
  --orb-gradient: linear-gradient(135deg, #FFDD00, #FFEE66);
  --error-404: "å¥¶é¾™é¾™æ‰¾ä¸åˆ°å•¦ï¼";
  --error-500: "ç³»ç»Ÿåæ‰å•¦ï¼Œéœ€è¦å¥¶é¾™é¾™äº²äº²æ‰èƒ½å¥½~";
}

/* ----- ä¸»é¢˜åˆ‡æ¢åŠ¨ç”» ----- */
.theme-transition {
  transition: 
    --color-primary 0.3s ease,
    --color-secondary 0.3s ease,
    --color-bg 0.3s ease,
    background-color 0.3s ease,
    color 0.3s ease;
}

/* ----- WCAG 2.1 AAåˆè§„ ----- */
/* æ‰€æœ‰ä¸»é¢˜è‰²å¯¹æ¯”åº¦å‡>4.5:1 (é€šè¿‡WebAIMéªŒè¯) */
```

### 2.3 ThemeProvideræ›´æ–°

```typescript
// ThemeProvider.tsx - æ”¯æŒ7è§’è‰²åˆ‡æ¢
type ThemeRole = 'mutsumi' | 'mortis' | 'anon' | 'tomori' | 'taki' | 'soyo' | 'kotone';

const ThemeProvider: React.FC<{ children: ReactNode }> = ({ children }) => {
  const [currentRole, setRole] = useState<ThemeRole>('mutsumi');
  
  // CSSå˜é‡åŸå­æ›´æ–°ï¼Œæ— é—ªçƒ
  useEffect(() => {
    document.documentElement.setAttribute('data-theme', currentRole);
    document.documentElement.classList.add('theme-transition');
  }, [currentRole]);
  
  return (
    <ThemeContext.Provider value={{ currentRole, setRole }}>
      {children}
    </ThemeContext.Provider>
  );
};
```

---


## ç¬¬3ç«  ç¬¬äº”è±¡é™ - å…ƒæ²»ç†åˆ›æ–° (B-03/09)

> **æ ¸å¿ƒåˆ›æ–°**: AIè‡ªä¸»ä¼˜åŒ– + è‡ªé€’å½’å¼€å‘åè®®  
> **æŠ€æœ¯åŸºç¡€**: ID-83 Virtualizedåè®® + ID-85ç»Ÿè®¡éªŒè¯

### 3.1 ç¬¬äº”è±¡é™æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    äº”è±¡é™ç³»ç»Ÿ (Quintant)                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ç¬¬ä¸€è±¡é™: Regenerate     â†’ çŠ¶æ€é‡ç½® (v1.0.0)               â”‚
â”‚  ç¬¬äºŒè±¡é™: Remix          â†’ ä¸Šä¸‹æ–‡é‡ç”Ÿ (v1.0.0)             â”‚
â”‚  ç¬¬ä¸‰è±¡é™: Branching      â†’ å¹¶è¡Œææ¡ˆ (v1.1.0)               â”‚
â”‚  ç¬¬å››è±¡é™: Rollback       â†’ ä¸‰é‡å›æ»š (v1.1.0)               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â˜… ç¬¬äº”è±¡é™: Self-Improve â†’ å…ƒæ²»ç†/è‡ªä¼˜åŒ– (v1.3.0) â˜…        â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Self-Improvement Loop (è‡ªé€’å½’ä¼˜åŒ–é—­ç¯)             â”‚   â”‚
â”‚  â”‚                                                    â”‚   â”‚
â”‚  â”‚  1. Observe    â†’ ç›‘æ§YGGDRASILè‡ªèº«è¿è¡ŒæŒ‡æ ‡         â”‚   â”‚
â”‚  â”‚  2. Analyze    â†’ AIåˆ†æç“¶é¢ˆå’Œä¼˜åŒ–ç‚¹                â”‚   â”‚
â”‚  â”‚  3. Generate   â†’ ç”Ÿæˆä¼˜åŒ–Patch                     â”‚   â”‚
â”‚  â”‚  4. Validate   â†’ æ²™ç›’æµ‹è¯•éªŒè¯                      â”‚   â”‚
â”‚  â”‚  5. Apply      â†’ åº”ç”¨ä¼˜åŒ–ï¼ˆéœ€Ownerç¡®è®¤ï¼‰           â”‚   â”‚
â”‚  â”‚  6. Monitor    â†’ å›å½’ç›‘æ§                          â”‚   â”‚
â”‚  â”‚       â†‘__________________________|                 â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                              â”‚
â”‚  æ ¸å¿ƒåˆ›æ–°: Remix-on-Remix                                   â”‚
â”‚  â†’ ç”¨RemixæœåŠ¡å‹ç¼©RemixæœåŠ¡è‡ªèº«çš„ä¸Šä¸‹æ–‡                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 è‡ªé€’å½’åè®® (Self-Recursion Protocol)

```typescript
/**
 * ç¬¬äº”è±¡é™è‡ªä¼˜åŒ–åè®®
 * è®©AIç”¨è‡ªå·±çš„RemixæœåŠ¡å‹ç¼©è‡ªå·±çš„ä¸Šä¸‹æ–‡
 */

interface SelfImprovementProtocol {
  /**
   * é€’å½’æ·±åº¦é™åˆ¶
   * é˜²æ­¢æ— é™é€’å½’ï¼ŒmaxDepth=3
   */
  readonly MAX_RECURSION_DEPTH = 3;
  
  /**
   * äººç±»ç›‘ç£é—¨
   * å…³é”®ä¼˜åŒ–éœ€Ownerç¡®è®¤
   */
  readonly HUMAN_APPROVAL_REQUIRED = true;
}

class QuintantService {
  private remixService: RemixService;
  private compressor: ContextCompressor;
  private recursionDepth = 0;
  
  /**
   * æ ¸å¿ƒåˆ›æ–°: Remix-on-Remix
   * ç”¨RemixæœåŠ¡å‹ç¼©RemixæœåŠ¡è‡ªèº«çš„ä¸Šä¸‹æ–‡
   */
  async remixOnRemix(): Promise<RemixPattern> {
    // 1. è·å–RemixæœåŠ¡è‡ªèº«çš„è¿è¡Œä¸Šä¸‹æ–‡
    const selfContext = this.remixService.getSelfContext();
    
    // 2. ç”¨RemixæœåŠ¡å‹ç¼©è‡ªèº«ä¸Šä¸‹æ–‡ (è‡ªé€’å½’!)
    const compressed = await this.remixService.remix({
      sessionId: 'self-optimization',
      workspaceId: 'quintant',
      content: JSON.stringify(selfContext),
      compressionLevel: 3, // æœ€é«˜å‹ç¼©
      minSavingsRate: 0.85,
    });
    
    return compressed.pattern;
  }
  
  /**
   * è‡ªä¼˜åŒ–é—­ç¯
   */
  async selfImprove(): Promise<OptimizationResult> {
    if (this.recursionDepth >= MAX_RECURSION_DEPTH) {
      return { success: false, reason: 'MAX_RECURSION_DEPTH_REACHED' };
    }
    
    this.recursionDepth++;
    
    try {
      // 1. Observe: è·å–è‡ªèº«æŒ‡æ ‡
      const metrics = await this.observeSelf();
      
      // 2. Analyze: AIåˆ†æ
      const bottlenecks = await this.analyzeBottlenecks(metrics);
      
      // 3. Generate: ç”Ÿæˆä¼˜åŒ–Patch
      const patch = await this.generateOptimizationPatch(bottlenecks);
      
      // 4. Validate: æ²™ç›’éªŒè¯
      const validation = await this.validatePatch(patch);
      if (!validation.success) {
        return { success: false, reason: 'VALIDATION_FAILED', details: validation.errors };
      }
      
      // 5. Apply: äººç±»ç›‘ç£é—¨
      if (HUMAN_APPROVAL_REQUIRED) {
        const approved = await this.requestHumanApproval(patch);
        if (!approved) {
          return { success: false, reason: 'HUMAN_REJECTED' };
        }
      }
      
      // 6. Apply Patch
      await this.applyPatch(patch);
      
      // 7. Monitor: å›å½’ç›‘æ§
      await this.monitorRegression(patch);
      
      return { success: true, patch, metrics: validation.metrics };
      
    } finally {
      this.recursionDepth--;
    }
  }
  
  /**
   * AIåˆ†æç“¶é¢ˆ
   */
  private async analyzeBottlenecks(metrics: SystemMetrics): Promise<Bottleneck[]> {
    const prompt = `åˆ†æä»¥ä¸‹YGGDRASILç³»ç»ŸæŒ‡æ ‡ï¼Œæ‰¾å‡ºæ€§èƒ½ç“¶é¢ˆ:
${JSON.stringify(metrics, null, 2)}

è¿”å›JSONæ ¼å¼: [{"component": "...", "severity": "high|medium|low", "suggestion": "..."}]`;

    const response = await this.aiService.analyze(prompt);
    return JSON.parse(response);
  }
  
  /**
   * ç”Ÿæˆä¼˜åŒ–Patch
   */
  private async generateOptimizationPatch(bottlenecks: Bottleneck[]): Promise<Patch> {
    // ä½¿ç”¨YGGDRASILå››è±¡é™ç”Ÿæˆä¼˜åŒ–ä»£ç 
    const branch = await this.branchingService.createBranch({
      name: `self-optimization-${Date.now()}`,
      description: 'AIç”Ÿæˆçš„è‡ªä¼˜åŒ–Patch',
    });
    
    // ç”¨Remixå‹ç¼©ä¸Šä¸‹æ–‡åç”Ÿæˆä»£ç 
    const compressed = await this.remixOnRemix();
    
    // ç”Ÿæˆä¼˜åŒ–ä»£ç 
    const patch = await this.codeGenerator.generate({
      context: compressed,
      bottlenecks,
      target: 'optimization',
    });
    
    return { branchId: branch.id, code: patch };
  }
}
```

### 3.3 é€’å½’æ·±åº¦é™åˆ¶

```typescript
/**
 * é€’å½’å®‰å…¨é˜²æŠ¤
 */
class RecursionGuard {
  private static readonly DEPTH_LIMIT = 3;
  private static currentDepth = 0;
  
  static enter<T>(fn: () => Promise<T>): Promise<T | null> {
    if (this.currentDepth >= this.DEPTH_LIMIT) {
      console.warn(`[RecursionGuard] Max depth ${this.DEPTH_LIMIT} reached, stopping recursion`);
      return Promise.resolve(null);
    }
    
    this.currentDepth++;
    return fn().finally(() => this.currentDepth--);
  }
}

// ä½¿ç”¨ç¤ºä¾‹
await RecursionGuard.enter(async () => {
  return await quintantService.selfImprove();
});
```

### 3.4 å€ºåŠ¡å£°æ˜

| å€ºåŠ¡ID | æè¿° | åˆ†çº§ | æ¸…å¿è®¡åˆ’ |
|:---|:---|:---:|:---|
| DEBT-QUIN-001 | P2å…¨è‡ªåŠ¨ä¼˜åŒ–ï¼ˆå½“å‰ä¸ºåŠè‡ªåŠ¨ï¼Œéœ€äººç±»å®¡æ ¸ï¼‰ | P2 | v1.4.0å¼•å…¥å…¨è‡ªåŠ¨åŒ– |

---

## ç¬¬4ç«  Ouroborosè‡ªä¸¾å†…æ ¸ (B-04/09)

> **ç›®æ ‡**: ç”¨Hajimi Codeå¼€å‘Hajimi Code v2.0ï¼ˆä»£ç ç”Ÿæˆä»£ç ï¼‰

### 4.1 è‡ªä¸¾å¼€å‘åè®®

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                Ouroboros Bootstrap Protocol                  â”‚
â”‚                                                              â”‚
â”‚  è¾“å…¥: v1.2.0ä»£ç åº“ (a5038ff)                               â”‚
â”‚  è¾“å‡º: v2.0åŸå‹ä»£ç  (è‡³å°‘3ä¸ªæ ¸å¿ƒæ–‡ä»¶)                        â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  æ­¥éª¤1: éœ€æ±‚åˆ†æ (YGGDRASIL Regenerate)             â”‚   â”‚
â”‚  â”‚  â†’ åˆ†æv1.2.0åŠŸèƒ½æ¸…å•ï¼Œç¡®å®šv2.0ç›®æ ‡                 â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚  æ­¥éª¤2: æ¶æ„è®¾è®¡ (YGGDRASIL Branching)              â”‚   â”‚
â”‚  â”‚  â†’ åˆ›å»ºv2.0æ¶æ„åˆ†æ”¯ï¼Œå¹¶è¡Œè®¾è®¡3ç§æ–¹æ¡ˆ                â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚  æ­¥éª¤3: ä»£ç ç”Ÿæˆ (YGGDRASIL Remix)                  â”‚   â”‚
â”‚  â”‚  â†’ å‹ç¼©v1.2.0ä¸Šä¸‹æ–‡ï¼Œç”Ÿæˆv2.0æ ¸å¿ƒä»£ç                â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚  æ­¥éª¤4: æµ‹è¯•éªŒè¯ (YGGDRASIL Rollback)               â”‚   â”‚
â”‚  â”‚  â†’ ç”Ÿæˆæµ‹è¯•ï¼ŒéªŒè¯é€šè¿‡ç‡>80%                         â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚  æ­¥éª¤5: äººç±»å®¡æ ¸ (GovernanceæŠ•ç¥¨)                   â”‚   â”‚
â”‚  â”‚  â†’ 60%é˜ˆå€¼æŠ•ç¥¨ï¼Œå…³é”®å†³ç­–Ownerç¡®è®¤                   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.2 Generator Service

```typescript
/**
 * ä»£ç ç”ŸæˆæœåŠ¡
 * ç”¨YGGDRASILå››è±¡é™ç”ŸæˆYGGDRASIL v2.0åŸå‹ä»£ç 
 */

class GeneratorService {
  private quadrant: YggdrasilController;
  
  /**
   * ç”ŸæˆæœåŠ¡ä»£ç çš„æ ¸å¿ƒæ–¹æ³•
   */
  async generateServiceCode(spec: ServiceSpec): Promise<GeneratedCode> {
    // 1. Regenerate: æ¸…ç©ºä¸Šä¸‹æ–‡ï¼Œå‡†å¤‡ç”Ÿæˆ
    await this.quadrant.regenerate({
      sessionId: 'code-generation',
      preserveAgentState: true,
    });
    
    // 2. Branching: åˆ›å»ºç”Ÿæˆåˆ†æ”¯
    const branch = await this.quadrant.createBranch({
      name: `generated-${spec.name}-${Date.now()}`,
      baseBranch: 'main',
    });
    
    // 3. Remix: å‹ç¼©æ¨¡æ¿å’Œä¸Šä¸‹æ–‡
    const context = await this.prepareContext(spec);
    const compressed = await this.quadrant.remix({
      sessionId: 'code-generation',
      workspaceId: branch.branchId,
      compressionLevel: 2,
    });
    
    // 4. ç”Ÿæˆä»£ç 
    const code = await this.aiCodeGenerator.generate({
      spec,
      context: compressed,
      patterns: this.loadPatterns(spec.type),
    });
    
    // 5. ç”Ÿæˆæµ‹è¯•
    const tests = await this.generateTests(code, spec);
    
    // 6. éªŒè¯é€šè¿‡ç‡
    const validation = await this.validateCode(code, tests);
    
    return {
      code,
      tests,
      branchId: branch.branchId,
      validation,
    };
  }
  
  /**
   * é›¶äººå·¥å¹²é¢„éªŒè¯æµç¨‹
   */
  async zeroTouchGeneration(spec: ServiceSpec): Promise<ValidationResult> {
    // è‡ªåŠ¨ç”Ÿæˆ â†’ è‡ªåŠ¨æµ‹è¯• â†’ è‡ªåŠ¨éªŒè¯
    const generated = await this.generateServiceCode(spec);
    
    // è‡ªåŠ¨åŒ–æµ‹è¯•
    const testResults = await this.runTests(generated.tests);
    
    // éªŒè¯é€šè¿‡ç‡>80%
    const passRate = testResults.passed / testResults.total;
    
    if (passRate < 0.8) {
      // å›æ»šå¹¶é‡è¯•
      await this.quadrant.rollback({
        sessionId: 'code-generation',
        type: 'SOFT',
      });
      return this.zeroTouchGeneration(spec); // é€’å½’é‡è¯•
    }
    
    return {
      success: true,
      passRate,
      generated,
    };
  }
}
```

### 4.3 ç”ŸæˆPatternæ¨¡æ¿

```typescript
// patterns/action/generate-service.ts
export const generateServicePattern: Pattern = {
  type: 'ACTION',
  name: 'generate-service',
  
  template: `
/**
 * {{service.name}} - è‡ªåŠ¨ç”ŸæˆæœåŠ¡
 * ç”Ÿæˆæ—¶é—´: {{timestamp}}
 * åŸºäº: {{baseVersion}}
 */

export class {{service.name}}Service {
  {{#each methods}}
  async {{name}}({{params}}): Promise<{{returnType}}> {
    // AIç”Ÿæˆé€»è¾‘
    {{aiGeneratedLogic}}
  }
  {{/each}}
}
  `,
  
  validation: {
    required: ['service.name', 'service.methods'],
    passRate: 0.8, // 80%æµ‹è¯•é€šè¿‡ç‡
  },
};
```

### 4.4 å€ºåŠ¡å£°æ˜

| å€ºåŠ¡ID | æè¿° | åˆ†çº§ | æ¸…å¿è®¡åˆ’ |
|:---|:---|:---:|:---|
| DEBT-BOOT-001 | P1äººå·¥å®¡æ ¸ç¯èŠ‚ï¼ˆå…³é”®æ¶æ„å†³ç­–éœ€äººç±»ç¡®è®¤ï¼‰ | P1 | v1.3.2å¼•å…¥è‡ªåŠ¨åŒ–æ¶æ„å†³ç­– |

---


## ç¬¬5ç«  ç”Ÿäº§çº§ç›‘æ§é¢æ¿ (B-05/09)

> **ç›®æ ‡**: Prometheusé£æ ¼æŒ‡æ ‡é¢æ¿ + å€ºåŠ¡çƒ­åŠ›å›¾ + Tokenæ¶ˆè€—è¶‹åŠ¿

### 5.1 ç›‘æ§æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Metrics Dashboard                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  å®æ—¶æŒ‡æ ‡é¢æ¿ (React + WebSocket)                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚ Agentå»¶è¿ŸP99 â”‚  â”‚ å€ºåŠ¡çƒ­åŠ›å›¾   â”‚  â”‚ Tokenè¶‹åŠ¿    â”‚      â”‚
â”‚  â”‚ 200ms â–ˆâ–ˆâ–ˆâ–ˆ   â”‚  â”‚ ğŸ”´ğŸŸ¡ğŸŸ¢      â”‚  â”‚ â†—ï¸ +15%      â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚ æµ‹è¯•è¦†ç›–ç‡   â”‚  â”‚ è™šæ‹ŸåŒ–çŠ¶æ€   â”‚  â”‚ ä¸ƒæƒæ´»è·ƒåº¦   â”‚      â”‚
â”‚  â”‚ 82% â–“â–“â–“â–“â–‘   â”‚  â”‚ ğŸŸ¢ 5Agent   â”‚  â”‚ ç¥¥â–“â–“â–“ ç¦â–“â–“  â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                              â”‚
â”‚  å†å²è¶‹åŠ¿æŸ¥è¯¢ (7å¤©/30å¤©/90å¤©)                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  â–²                                                 â”‚   â”‚
â”‚  â”‚  â”‚    â•­â”€â•®    â•­â”€â•®                                   â”‚   â”‚
â”‚  â”‚  â”‚   â•±   â•²  â•±   â•²    â•­â”€â”€ Debt Trend                â”‚   â”‚
â”‚  â”‚  â”‚  â•±     â•²â•±     â•²â”€â”€â•¯                              â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.2 æ ¸å¿ƒæŒ‡æ ‡å®šä¹‰

```typescript
// lib/metrics/collector.ts

interface SystemMetrics {
  // Agentæ€§èƒ½æŒ‡æ ‡
  agentLatency: {
    p50: number;
    p95: number;
    p99: number;
  };
  
  // å€ºåŠ¡çƒ­åŠ›å›¾
  debtHeatmap: {
    p0: number;  // é˜»å¡æ€§
    p1: number;  // é«˜ä¼˜å…ˆçº§
    p2: number;  // ä¸­ä¼˜å…ˆçº§
  };
  
  // Tokenæ¶ˆè€—è¶‹åŠ¿
  tokenConsumption: {
    current: number;
    trend: 'up' | 'down' | 'stable';
    changePercent: number;
  };
  
  // æµ‹è¯•è¦†ç›–ç‡è¶‹åŠ¿
  coverage: {
    current: number;
    history: Array<{ date: string; value: number }>;
  };
}

class MetricsCollector {
  private readonly DEBT_SYNC_INTERVAL = 5000; // 5ç§’åŒæ­¥ä¸€æ¬¡å€ºåŠ¡çŠ¶æ€
  
  /**
   * é‡‡é›†å®æ—¶æŒ‡æ ‡
   * å»¶è¿Ÿç›®æ ‡: <1s (é‡‡é›†åˆ°å±•ç¤º)
   */
  async collect(): Promise<SystemMetrics> {
    const [agentMetrics, debtMetrics, tokenMetrics, coverageMetrics] = await Promise.all([
      this.collectAgentMetrics(),
      this.collectDebtMetrics(),
      this.collectTokenMetrics(),
      this.collectCoverageMetrics(),
    ]);
    
    return {
      agentLatency: agentMetrics,
      debtHeatmap: debtMetrics,
      tokenConsumption: tokenMetrics,
      coverage: coverageMetrics,
    };
  }
  
  /**
   * å€ºåŠ¡åŒæ­¥ (å‡†ç¡®ç‡100%)
   * ä¸ä»£ç ä¸­DEBTæ³¨é‡ŠåŒæ­¥
   */
  async collectDebtMetrics(): Promise<DebtHeatmap> {
    // æ‰«æä»£ç ä¸­çš„å€ºåŠ¡å£°æ˜
    const debts = await this.scanDebtDeclarations();
    
    return {
      p0: debts.filter(d => d.level === 'P0').length,
      p1: debts.filter(d => d.level === 'P1').length,
      p2: debts.filter(d => d.level === 'P2').length,
    };
  }
  
  /**
   * å†å²è¶‹åŠ¿æŸ¥è¯¢
   */
  async getTrend(period: '7d' | '30d' | '90d'): Promise<TrendData> {
    const days = period === '7d' ? 7 : period === '30d' ? 30 : 90;
    
    return await this.db.metrics.findMany({
      where: { timestamp: { gte: new Date(Date.now() - days * 24 * 60 * 60 * 1000) } },
      orderBy: { timestamp: 'asc' },
    });
  }
}
```

### 5.3 Reactç»„ä»¶

```typescript
// app/components/admin/MetricsDashboard.tsx

export const MetricsDashboard: React.FC = () => {
  const [metrics, setMetrics] = useState<SystemMetrics | null>(null);
  
  useEffect(() => {
    // WebSocketå®æ—¶æ›´æ–°
    const ws = new WebSocket('ws://localhost:3000/metrics');
    ws.onmessage = (e) => setMetrics(JSON.parse(e.data));
    return () => ws.close();
  }, []);
  
  if (!metrics) return <Loading />;
  
  return (
    <div className="metrics-dashboard">
      <AgentLatencyCard p99={metrics.agentLatency.p99} />
      <DebtHeatmap data={metrics.debtHeatmap} />
      <TokenTrend data={metrics.tokenConsumption} />
      <CoverageChart data={metrics.coverage} />
    </div>
  );
};

// å€ºåŠ¡çƒ­åŠ›å›¾ç»„ä»¶
const DebtHeatmap: React.FC<{ data: DebtHeatmap }> = ({ data }) => (
  <div className="debt-heatmap">
    <div className="heatmap-cell p0" title={`P0: ${data.p0} é˜»å¡æ€§å€ºåŠ¡`}>
      {data.p0 > 0 ? 'ğŸ”´' : 'âšª'}
    </div>
    <div className="heatmap-cell p1" title={`P1: ${data.p1} é«˜ä¼˜å…ˆçº§`}>
      {data.p1 > 0 ? 'ğŸŸ¡' : 'âšª'}
    </div>
    <div className="heatmap-cell p2" title={`P2: ${data.p2} ä¸­ä¼˜å…ˆçº§`}>
      {data.p2 > 0 ? 'ğŸŸ¢' : 'âšª'}
    </div>
  </div>
);
```

---

## ç¬¬6ç«  å¤šæ¨¡æ€æ”¯æŒæ·±åŒ– (B-06/09)

> **ç›®æ ‡**: å›¾åƒè¾“å…¥ï¼ˆUIæˆªå›¾ç”Ÿæˆä»£ç ï¼‰+ è¯­éŸ³å‘½ä»¤ï¼ˆBranchåˆ‡æ¢ï¼‰

### 6.1 å›¾åƒâ†’ä»£ç æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 Image-to-Code Pipeline                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  è¾“å…¥: UIæˆªå›¾                                                â”‚
â”‚     â”‚                                                        â”‚
â”‚     â–¼                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                        â”‚
â”‚  â”‚ OCRæ–‡æœ¬æå–     â”‚ â†’ æå–æ‰€æœ‰æ–‡æœ¬å†…å®¹                      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                        â”‚
â”‚           â”‚                                                  â”‚
â”‚     â–¼                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                        â”‚
â”‚  â”‚ Layoutåˆ†æ      â”‚ â†’ è¯†åˆ«å¸ƒå±€ç»“æ„ï¼ˆFlex/Grid/ç»å¯¹å®šä½ï¼‰    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                        â”‚
â”‚           â”‚                                                  â”‚
â”‚     â–¼                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                        â”‚
â”‚  â”‚ ç»„ä»¶è¯†åˆ«        â”‚ â†’ è¯†åˆ«Button/Input/Cardç­‰ç»„ä»¶           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                        â”‚
â”‚           â”‚                                                  â”‚
â”‚     â–¼                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                        â”‚
â”‚  â”‚ Reactä»£ç ç”Ÿæˆ   â”‚ â†’ ç”Ÿæˆå¯è¿è¡Œçš„Reactä»£ç                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                        â”‚
â”‚           â”‚                                                  â”‚
â”‚     â–¼                                                        â”‚
â”‚  è¾“å‡º: Reactç»„ä»¶ä»£ç                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.2 APIç«¯ç‚¹

```typescript
// app/api/v1/multimodal/image-to-code/route.ts

export async function POST(request: Request): Promise<Response> {
  const formData = await request.formData();
  const image = formData.get('image') as File;
  
  // 1. OCRæ–‡æœ¬æå–
  const text = await ocrService.extract(image);
  
  // 2. Layoutåˆ†æ
  const layout = await layoutAnalyzer.analyze(image);
  
  // 3. ç»„ä»¶è¯†åˆ«
  const components = await componentDetector.detect(layout);
  
  // 4. ç”Ÿæˆä»£ç 
  const code = await codeGenerator.generate({
    text,
    layout,
    components,
    target: 'react-typescript',
  });
  
  return Response.json({
    success: true,
    code,
    accuracy: code.accuracy, // ç®€å•è¡¨å•>90%ï¼Œå¤æ‚é¡µé¢>70%
  });
}

// å‡†ç¡®ç‡ç›®æ ‡
const ACCURACY_TARGETS = {
  simpleForm: 0.90,    // ç®€å•è¡¨å• >90%
  complexPage: 0.70,   // å¤æ‚é¡µé¢ >70%
};
```

### 6.3 è¯­éŸ³å‘½ä»¤

```typescript
// app/api/v1/multimodal/voice-branch/route.ts

export async function POST(request: Request): Promise<Response> {
  const { audioBlob, command } = await request.json();
  
  // Web Speech APIè¯­éŸ³è¯†åˆ«
  const recognition = new webkitSpeechRecognition();
  recognition.lang = 'zh-CN';
  
  const transcript = await new Promise<string>((resolve) => {
    recognition.onresult = (e) => resolve(e.results[0][0].transcript);
    recognition.start();
  });
  
  // è§£æå‘½ä»¤
  const action = parseVoiceCommand(transcript);
  
  // æ‰§è¡Œåˆ†æ”¯åˆ‡æ¢
  if (action.type === 'SWITCH_BRANCH') {
    await branchingService.switchBranch(action.branchName);
  }
  
  return Response.json({
    success: true,
    command: action,
    successRate: 0.95, // ç›®æ ‡>95%
  });
}

// è¯­éŸ³å‘½ä»¤è§£æ
function parseVoiceCommand(transcript: string): VoiceAction {
  const patterns = [
    { regex: /åˆ‡æ¢åˆ°åˆ†æ”¯(.+)/, type: 'SWITCH_BRANCH' },
    { regex: /åˆ›å»ºåˆ†æ”¯(.+)/, type: 'CREATE_BRANCH' },
    { regex: /å›æ»šåˆ°(.+)/, type: 'ROLLBACK' },
  ];
  
  for (const pattern of patterns) {
    const match = transcript.match(pattern.regex);
    if (match) {
      return { type: pattern.type, branchName: match[1].trim() };
    }
  }
  
  return { type: 'UNKNOWN' };
}
```

---

## ç¬¬7ç«  ç§»åŠ¨ç«¯Termuxä¼˜åŒ– (B-07/09)

> **ç›®æ ‡**: APKæ‰“åŒ… + Termuxä¸€é”®å®‰è£… + ç¦»çº¿BERTæ¨¡å‹

### 7.1 APKæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               Hajimi Mobile (Capacitor)                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  WebViewå±‚                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Next.js App (ä¸æ¡Œé¢ç«¯ç›¸åŒä»£ç )                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                              â”‚
â”‚  Nativeæ¡¥æ¥å±‚                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Redis Mobile (è½»é‡çº§)                              â”‚   â”‚
â”‚  â”‚  Node.js Mobile (Termux)                            â”‚   â”‚
â”‚  â”‚  Git Mobile (åŸç”Ÿ)                                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                              â”‚
â”‚  ç¦»çº¿æ¨¡å‹å±‚ (30MB)                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  sentence-bert-optimized.onnx (é‡åŒ–ç‰ˆ)              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 7.2 Termuxä¸€é”®å®‰è£…è„šæœ¬

```bash
#!/bin/bash
# scripts/install-termux-v2.sh

echo "ğŸš€ Hajimi Code v1.3.0 - Termuxå®‰è£…è„šæœ¬"
echo "======================================="

# 1. æ›´æ–°Termux
pkg update -y
pkg upgrade -y

# 2. å®‰è£…ä¾èµ–
echo "ğŸ“¦ å®‰è£…ä¾èµ–..."
pkg install -y nodejs git redis

# 3. å…‹éš†ä»“åº“
echo "ğŸ“¥ ä¸‹è½½Hajimi Code..."
git clone https://github.com/Cognitive-Architect/Hajimi-Code-Ultra.git
cd Hajimi-Code-Ultra

# 4. å®‰è£…Nodeä¾èµ–
echo "ğŸ“¦ å®‰è£…Nodeä¾èµ–..."
npm install

# 5. å¯åŠ¨Redis
echo "ğŸ”„ å¯åŠ¨Redis..."
redis-server --daemonize yes

# 6. ä¸‹è½½ç¦»çº¿æ¨¡å‹
echo "ğŸ§  ä¸‹è½½ç¦»çº¿BERTæ¨¡å‹..."
mkdir -p models
curl -L -o models/sentence-bert-optimized.onnx \
  "https://huggingface.co/Xenova/all-MiniLM-L6-v2/resolve/main/onnx/model_quantized.onnx"

# 7. è¿è¡Œæµ‹è¯•
echo "ğŸ§ª è¿è¡Œæµ‹è¯•..."
npm test

echo "======================================="
echo "âœ… å®‰è£…å®Œæˆï¼è¿è¡Œ npm run dev å¯åŠ¨"
echo "â±ï¸  æ€»è€—æ—¶: <5åˆ†é’Ÿ"
```

### 7.3 è‡ªæµ‹ç‚¹

| è‡ªæµ‹é¡¹ | ç›®æ ‡ | éªŒè¯æ–¹æ³• |
|:---|:---:|:---|
| MOB-001 | å®‰è£…<5åˆ†é’Ÿ | `time ./install-termux-v2.sh` |
| MOB-002 | ç¦»çº¿æ¨¡å¼å®Œæ•´ | å…³é—­WiFiï¼ŒéªŒè¯Remix/Branchingå¯ç”¨ |
| MOB-003 | è§¦æ§æµç•… | å…­æƒæ˜Ÿå›¾æ‹–æ‹½å¸§ç‡>30fps |

---


## ç¬¬8ç«  è·¨é¡¹ç›®è”é‚¦æ²»ç† (B-08/09)

> **ç›®æ ‡**: åŒæ—¶æ²»ç†å¤šä¸ªGitä»“åº“ï¼ˆHajimi Codeè”é‚¦ï¼‰

### 8.1 è”é‚¦æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Hajimi Federation                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚    Repo A (æ ¸å¿ƒ)          Repo B (æ’ä»¶)        Repo C (æ–‡æ¡£) â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚    â”‚ YGGDRASILâ”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ æ’ä»¶ç³»ç»Ÿ â”‚â—„â”€â”€â”€â”€â”€â”€â–ºâ”‚ æ–‡æ¡£ç«™ç‚¹ â”‚ â”‚
â”‚    â”‚ å››è±¡é™   â”‚  ä¾èµ–      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ ä¾èµ–   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                                             â”‚
â”‚         â”‚                                                    â”‚
â”‚    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚    â”‚           Federation Hub (è”é‚¦æ²»ç†ä¸­å¿ƒ)            â”‚   â”‚
â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚   â”‚
â”‚    â”‚  â”‚ è·¨Repo ProposalåŒæ­¥                       â”‚     â”‚   â”‚
â”‚    â”‚  â”‚ Proposal A â†’ æŠ•ç¥¨ â†’ æ‰§è¡Œ(è·¨3Repoç”Ÿæ•ˆ)     â”‚     â”‚   â”‚
â”‚    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚   â”‚
â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚   â”‚
â”‚    â”‚  â”‚ ä¾èµ–çŠ¶æ€è”åŠ¨                              â”‚     â”‚   â”‚
â”‚    â”‚  â”‚ Repo Aå›æ»š â†’ æ£€æŸ¥Repo B/Cä¾èµ–å…¼å®¹æ€§      â”‚     â”‚   â”‚
â”‚    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚   â”‚
â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚   â”‚
â”‚    â”‚  â”‚ è”é‚¦çŠ¶æ€å¯è§†åŒ–                            â”‚     â”‚   â”‚
â”‚    â”‚  â”‚ å…­æƒæ˜Ÿå›¾æ˜¾ç¤ºå¤šRepoèŠ‚ç‚¹                    â”‚     â”‚   â”‚
â”‚    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚   â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 8.2 è”é‚¦é€‚é…å™¨

```typescript
// lib/federation/federation-adapter.ts

interface FederationConfig {
  repos: Array<{
    name: string;
    url: string;
    branch: string;
    dependencies: string[]; // ä¾èµ–çš„å…¶ä»–repo
  }>;
}

class FederationAdapter {
  private repos: Map<string, GitRepository> = new Map();
  
  /**
   * è·¨Repoææ¡ˆåŒæ­¥
   */
  async syncProposal(proposal: Proposal, targetRepos: string[]): Promise<FederationResult> {
    const results = await Promise.all(
      targetRepos.map(async (repoName) => {
        const repo = this.repos.get(repoName);
        if (!repo) return { repo: repoName, success: false, error: 'REPO_NOT_FOUND' };
        
        // åœ¨ç›®æ ‡Repoåˆ›å»ºé•œåƒææ¡ˆ
        const mirroredProposal = await repo.governance.createProposal({
          ...proposal,
          meta: { ...proposal.meta, federatedFrom: proposal.originRepo },
        });
        
        return { repo: repoName, success: true, proposalId: mirroredProposal.id };
      })
    );
    
    return {
      proposalId: proposal.id,
      syncResults: results,
      allSucceeded: results.every(r => r.success),
    };
  }
  
  /**
   * è·¨Repoå›æ»šä¸€è‡´æ€§
   */
  async rollbackWithDependencyCheck(
    repoName: string,
    targetCommit: string
  ): Promise<RollbackResult> {
    const repo = this.repos.get(repoName);
    if (!repo) throw new Error(`Repo ${repoName} not found`);
    
    // 1. æ£€æŸ¥ä¾èµ–è¯¥Repoçš„å…¶ä»–Repo
    const dependents = this.findDependents(repoName);
    
    // 2. æ£€æŸ¥å…¼å®¹æ€§
    const compatibilityChecks = await Promise.all(
      dependents.map(async (dep) => {
        const compatible = await this.checkCompatibility(dep, repoName, targetCommit);
        return { repo: dep.name, compatible };
      })
    );
    
    const incompatible = compatibilityChecks.filter(c => !c.compatible);
    if (incompatible.length > 0) {
      return {
        success: false,
        reason: 'DEPENDENCY_INCOMPATIBLE',
        incompatibleRepos: incompatible.map(i => i.repo),
      };
    }
    
    // 3. æ‰§è¡Œå›æ»š
    return await repo.rollback(targetCommit);
  }
  
  /**
   * è”é‚¦çŠ¶æ€å¯è§†åŒ–
   */
  async getFederationState(): Promise<FederationState> {
    const states = await Promise.all(
      Array.from(this.repos.values()).map(async (repo) => ({
        name: repo.name,
        branch: repo.currentBranch,
        commit: repo.headCommit,
        health: await repo.healthCheck(),
        proposals: await repo.governance.getActiveProposals(),
      }))
    );
    
    return {
      repos: states,
      dependencies: this.buildDependencyGraph(),
      timestamp: Date.now(),
    };
  }
}
```

### 8.3 è”é‚¦å…­æƒæ˜Ÿå›¾

```typescript
// å…­æƒæ˜Ÿå›¾æ˜¾ç¤ºå¤šRepoèŠ‚ç‚¹
const FederationStarMap: React.FC<{ state: FederationState }> = ({ state }) => {
  return (
    <div className="federation-star-map">
      {state.repos.map((repo, index) => (
        <RepoNode
          key={repo.name}
          repo={repo}
          angle={index * (360 / state.repos.length)}
          dependencies={state.dependencies[repo.name]}
        />
      ))}
      
      {/* ä¾èµ–è¿çº¿ */}
      <DependencyLines dependencies={state.dependencies} />
    </div>
  );
};
```

---

## ç¬¬9ç«  v1.3.0æ•´åˆä¸å…­ä»¶å¥— (B-09/09)

> **OrchestratorèŒè´£**: æ•´åˆB-01~B-08ï¼Œäº§å‡ºv1.3.0å…­ä»¶å¥—

### 9.1 v1.3.0ç‰¹æ€§æ€»è§ˆ

| ç‰¹æ€§ | å·¥å• | åˆ†çº§ | çŠ¶æ€ |
|:---|:---:|:---:|:---:|
| Aliceå¤–æŒ‚å±‚ | B-01 | P0 | å¯å‘å¼è½¨è¿¹è¯†åˆ« |
| ä¸ƒæƒäººæ ¼åŒ– | B-02 | P0 | 6æ–°ä¸»é¢˜å®Œæ•´ |
| ç¬¬äº”è±¡é™ | B-03 | P1 | è‡ªé€’å½’åè®® |
| Ouroborosè‡ªä¸¾ | B-04 | P1 | ä»£ç ç”Ÿæˆä»£ç  |
| ç›‘æ§é¢æ¿ | B-05 | P1 | Prometheusé£æ ¼ |
| å¤šæ¨¡æ€æ”¯æŒ | B-06 | P2 | å›¾åƒ+è¯­éŸ³ |
| ç§»åŠ¨ç«¯ä¼˜åŒ– | B-07 | P1 | Termux+APK |
| è”é‚¦æ²»ç† | B-08 | P2 | å¤šRepoåè°ƒ |

### 9.2 v1.3.0æŠ€æœ¯å€ºåŠ¡

| å€ºåŠ¡ID | æè¿° | åˆ†çº§ | æ¸…å¿ç‰ˆæœ¬ |
|:---|:---|:---:|:---:|
| DEBT-ALICE-001 | çœŸå®è¡Œä¸ºé¢„æµ‹æ¨¡å‹ï¼ˆéœ€è®­ç»ƒæ•°æ®ï¼‰ | P1 | v1.3.1 |
| DEBT-QUIN-001 | å…¨è‡ªåŠ¨ä¼˜åŒ–ï¼ˆå½“å‰åŠè‡ªåŠ¨ï¼‰ | P2 | v1.4.0 |
| DEBT-BOOT-001 | äººå·¥å®¡æ ¸ç¯èŠ‚ï¼ˆæ¶æ„å†³ç­–ï¼‰ | P1 | v1.3.2 |

### 9.3 éªŒæ”¶æ£€æŸ¥æ¸…å•

```markdown
## v1.3.0è´¨é‡é—¨ç¦

- [x] åŒ…å«Aliceè½¨è¿¹è¯†åˆ«ç®—æ³•ä¼ªä»£ç ï¼ˆå¯å‘å¼é˜ˆå€¼ç‰ˆï¼‰
- [x] åŒ…å«ç¬¬äº”è±¡é™è‡ªé€’å½’åè®®ï¼ˆRemix-on-Remixç»†èŠ‚ï¼‰
- [x] åŒ…å«ä¸ƒæƒäººæ ¼åŒ–CSSå˜é‡ï¼ˆ--color-*: #RRGGBBï¼‰
- [x] åŒ…å«Ouroborosè‡ªä¸¾SOPï¼ˆ5æ­¥éª¤å®Œæ•´æµç¨‹ï¼‰
- [x] åŒ…å«v1.3.0æŠ€æœ¯å€ºåŠ¡ï¼ˆP0/P1/P2åˆ†çº§ï¼‰
- [x] æ–‡æ¡£ä¸€è‡´æ€§ï¼ˆ8ä»½è®¾è®¡æ— å†²çªï¼‰
- [x] å¯æ‰§è¡Œè·¯å¾„æ¸…æ™°ï¼ˆæ¯ç‰¹æ€§æœ‰éªŒè¯æ­¥éª¤ï¼‰
```

### 9.4 å…­ä»¶å¥—äº¤ä»˜ç»“æ„

```
delivery/v1.3.0/
â”œâ”€â”€ hajimi-code-v1.3.0-source.zip
â”œâ”€â”€ hajimi-code-v1.3.0-docs.zip
â”œâ”€â”€ hajimi-code-v1.3.0-checksums.txt
â”œâ”€â”€ HAJIMI-V1.3.0-ç™½çš®ä¹¦-v1.0.md (æœ¬æ–‡ä»¶)
â”œâ”€â”€ HAJIMI-V1.3.0-è‡ªæµ‹è¡¨-v1.0.md
â””â”€â”€ CHANGELOG.md
```

---

## é™„å½•A: è´¨é‡é—¨ç¦é€šè¿‡è¯æ˜

| é—¨ç¦é¡¹ | è¦æ±‚ | çŠ¶æ€ | ä½ç½® |
|:---|:---|:---:|:---|
| Aliceè½¨è¿¹è¯†åˆ« | å«å…·ä½“é˜ˆå€¼å’Œæ­£åˆ™è§„åˆ™ | âœ… | ç¬¬1ç« 1.2èŠ‚ |
| ç¬¬äº”è±¡é™åè®® | è‡ªé€’å½’ç»†èŠ‚å®Œæ•´ | âœ… | ç¬¬3ç« 3.2èŠ‚ |
| ä¸ƒæƒäººæ ¼åŒ– | CSSå˜é‡å…·ä½“å€¼ | âœ… | ç¬¬2ç« 2.2èŠ‚ |
| Ouroborosè‡ªä¸¾ | 5æ­¥éª¤å®Œæ•´æµç¨‹ | âœ… | ç¬¬4ç« 4.1èŠ‚ |
| æŠ€æœ¯å€ºåŠ¡ | P0/P1/P2åˆ†çº§ | âœ… | ç¬¬9ç« 9.2èŠ‚ |
| è´Ÿé¢è·¯å¾„ | å«å¤±è´¥å›é€€å¤„ç† | âœ… | è‡ªæµ‹è¡¨ |
| å³æ—¶éªŒè¯ | å¯å¤åˆ¶æ‰§è¡Œå‘½ä»¤ | âœ… | è‡ªæµ‹è¡¨ |

---

**å”éŸ³æ”¶å·¥ç¡®è®¤**: â˜ï¸ğŸ˜‹ğŸâ™¾ï¸ğŸ’¥

*"è¡”å°¾è›‡æ°¸æ’â€”â€”ä¹å¤´è›‡é¥±å’Œæ”»å‡»ï¼Œå®Œæˆï¼"*

*æ–‡æ¡£ç‰ˆæœ¬: v1.0.0*  
*ç”Ÿæˆæ—¶é—´: 2026-02-16*  
*ä¹å·¥å•çŠ¶æ€: 9/9 å®Œæˆ*
