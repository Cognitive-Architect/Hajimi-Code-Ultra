# HAJIMI Phase 5 人格化UI 白皮书 v1.0

> **文档编号**: HAJIMI-PHASE5-PERSONA-001  
> **版本**: v1.0  
> **日期**: 2026-02-15  
> **状态**: 已发布

---

## 目录

1. [项目背景](#1-项目背景)
2. [设计理念](#2-设计理念)
3. [系统架构](#3-系统架构)
4. [已实现功能](#4-已实现功能)
5. [技术债务](#5-技术债务)
6. [自测结果](#6-自测结果)
7. [后续规划](#7-后续规划)

---

## 1. 项目背景

Phase 5人格化UI项目旨在为Hajimi系统注入角色化交互体验，将抽象的AI治理功能具象化为七位性格鲜明的数字人格。

### 1.1 七角色设定

| 角色 | 英文名 | 职责 | 主题色 |
|------|--------|------|--------|
| 客服小祥 | CustomerService | 用户支持 | 深紫色 #6B46C1 |
| 压力怪 | StressTester | 系统审计 | 红色 #DC2626 |
| 审计官 | Auditor | 合规检查 | 橙色 #F97316 |
| 治理官 | Governance | 提案管理 | 蓝色 #2563EB |
| 预言者 | Oracle | 趋势预测 | 青色 #06B6D4 |
| 协调者 | Coordinator | 资源调度 | 绿色 #16A34A |
| 监护者 | Guardian | 安全监控 | 金色 #D97706 |

---

## 2. 设计理念

### 2.1 设计原则

- **一致性**: 统一的视觉语言和交互模式
- **渐进式**: 从核心角色向全角色扩展
- **可扩展**: 支持动态添加新角色
- **性能优先**: 主题切换无闪烁、无重载

### 2.2 视觉规范

```
客服小祥主题色板:
├── primary: #6B46C1 (深紫)
├── secondary: #9F7AEA (浅紫)
├── accent: #F6E05E (金黄)
├── background: #1A1A2E (深蓝黑)
└── text: #E2E8F0 (灰白)
```

---

## 3. 系统架构

### 3.1 主题系统架构

```
┌─────────────────────────────────────────────┐
│              ThemeProvider                  │
│         (React Context + CSS Vars)          │
└──────────────────┬──────────────────────────┘
                   │
     ┌─────────────┼─────────────┐
     │             │             │
┌────▼────┐   ┌────▼────┐   ┌────▼────┐
│ Layout  │   │ Components│   │  Pages  │
│  布局   │   │   组件   │   │  页面   │
└─────────┘   └─────────┘   └─────────┘
```

### 3.2 核心模块

| 模块 | 路径 | 说明 |
|------|------|------|
| 主题上下文 | `app/context/ThemeContext.tsx` | 全局主题状态管理 |
| 角色配置 | `config/personas.ts` | 七角色元数据定义 |
| 悬浮球 | `components/FloatingOrb/` | 可拖拽悬浮交互组件 |
| 错误页 | `app/error.tsx` | 人格化错误边界 |

---

## 4. 已实现功能

### 4.1 P0 - 核心功能 ✅

| 功能 | 说明 | 状态 |
|------|------|------|
| 客服小祥深紫主题 | 完整主题色板 + 组件适配 | ✅ 已实现 |
| 压力怪审计界面 | 审计报告人格化展示 | ✅ 已实现 |
| 错误码彩蛋系统 | 404/500错误页角色化 | ✅ 已实现 |
| 悬浮球基础版 | 客服小祥Q版头像悬浮球 | ✅ 已实现 |
| 六权星图涂装 | 治理能力可视化人格化 | ✅ 已实现 |
| 聊天窗人格化 | 对话气泡主题适配 | ✅ 已实现 |
| Debug医生面板 | 调试用占位面板 | ✅ 已实现 |

### 4.2 技术亮点

- **CSS变量动态切换**: 通过修改`:root`变量实现毫秒级主题切换
- **组件级懒加载**: 悬浮球按需加载，不影响首屏性能
- **错误边界封装**: 全站错误捕获并人格化展示

---

## 5. 技术债务

### 5.1 P1 - 简化实现 ⚠️

| 债务项 | 说明 | 影响 |
|--------|------|------|
| 六角色主题占位 | 仅客服小祥完整，其他色板预留 | 其他角色体验不完整 |
| 悬浮球单角色 | 仅客服小祥头像，其他待绘制 | 多角色切换无头像 |
| 主题切换限制 | 仅支持客服小祥↔压力怪 | 其他角色无法切换 |

### 5.2 P2 - 延后至v1.1.0 📋

| 债务项 | 延后原因 | 计划版本 |
|--------|----------|----------|
| ProposalPanel | 治理合约接口未就绪 | v1.1.0 |
| DemoController | 演示模式优先级降低 | v1.1.0 |
| DemoPanel | 依赖演示控制器 | v1.1.0 |
| Alice悬浮球外挂 | 多角色协调复杂度高 | v1.1.0 |
| 完整七角色头像 | 美术资源制作中 | v1.1.0 |
| 主题持久化 | localStorage存储偏好 | v1.1.0 |

### 5.3 已知缺陷

1. 主题切换后部分组件需手动刷新才能完全应用
2. 移动端适配未充分测试
3. 暗黑/亮色模式切换未实现

---

## 6. 自测结果

### 6.1 测试覆盖

详见 [HAJIMI-PHASE5-PERSONA-001-自测表-v1.0.md](./HAJIMI-PHASE5-PERSONA-001-自测表-v1.0.md)

**汇总**: 18项自测点全部通过 ✅

### 6.2 关键测试项

| 测试ID | 测试项 | 结果 |
|--------|--------|------|
| DEBT-001 | Alice外挂层声明 | ✅ 已声明延后 |
| DEBT-002 | 六角色占位声明 | ✅ 已声明仅客服小祥完整 |
| DEBT-003 | ProposalPanel延后声明 | ✅ 已声明延后至v1.1.0 |

---

## 7. 后续规划

### 7.1 v1.1.0 路线图

```
v1.1.0 (预计 2026-Q2)
├── ProposalPanel 治理提案面板
├── DemoController 演示控制器
├── Alice悬浮球外挂层
├── 主题持久化存储
└── 七角色Q版头像绘制
```

### 7.2 v1.2.0 路线图

```
v1.2.0 (预计 2026-Q3)
├── 完整七角色主题实现
├── 动态角色切换动画
├── 移动端适配优化
└── 暗黑/亮色双模式
```

### 7.3 v2.0.0 愿景

- AI驱动的角色情绪表达
- 多角色同时在线协作
- 用户自定义角色创建

---

## 附录

### A. 相关文档

- [技术债务声明](./persona-debt-v1.md)
- [执行摘要](./persona-exec-summary-v1.md)
- [自测表](./HAJIMI-PHASE5-PERSONA-001-自测表-v1.0.md)

### B. 修订记录

| 版本 | 日期 | 修订内容 |
|------|------|----------|
| v1.0 | 2026-02-15 | 初始版本发布 |

---

*本文档由债务记录官编制，诚实记录Phase 5第一版实现状态。*
