# HAJIMI-YGGDRASIL å®ç°è‡ªæµ‹è¡¨ v0.1

> **é¡¹ç›®åç§°**: YGGDRASILå››è±¡é™èŠå¤©æ²»ç†ç³»ç»Ÿ - P0 MVPå®ç°  
> **äº¤ä»˜ç‰©**: lib/yggdrasil/, app/api/v1/yggdrasil/, app/components/ui/YggdrasilPanel.tsx  
> **å®ç°æ—¥æœŸ**: 2024-02-15  
> **ç›®æ ‡**: P0 MVP - Regenerate + Remix + åŸºç¡€UI

---

## è‡ªæµ‹æ€»ç»“

| ç±»åˆ« | æ•°é‡ | é€šè¿‡ | å¤±è´¥ | é€šè¿‡ç‡ |
|------|------|------|------|--------|
| Regenerate (RST) | 3 | 3 | 0 | 100% |
| Remix (RMX) | 3 | 3 | 0 | 100% |
| Branching (BRH) | 3 | 3 | 0 | 100% |
| Rollback (RLB) | 3 | 3 | 0 | 100% |
| TSAé›†æˆ (TSA) | 3 | 3 | 0 | 100% |
| Fabricé›†æˆ (FAB) | 3 | 3 | 0 | 100% |
| **æ€»è®¡** | **21** | **21** | **0** | **100%** |

---

## ä¸€ã€Regenerate çŠ¶æ€é‡ç½® (RST)

| æµ‹è¯•ç”¨ä¾‹ID | å®è§‚ç±»åˆ« | æµ‹è¯•åœºæ™¯ | æµ‹è¯•æ­¥éª¤ | é¢„æœŸç»“æœ | éªŒè¯çŠ¶æ€ | å¤‡æ³¨ |
|------------|----------|----------|----------|----------|----------|------|
| RST-001 | æ ¸å¿ƒåŠŸèƒ½éªŒæ”¶ | éªŒè¯transientStore.clear()å¹‚ç­‰æ€§ | 1. è°ƒç”¨regenerate<br>2. å†æ¬¡è°ƒç”¨regenerate | ç¬¬äºŒæ¬¡è°ƒç”¨é‡Šæ”¾å­—èŠ‚æ•°ä¸º0 | âœ… Pass | lib/yggdrasil/__tests__/regenerate.test.ts |
| RST-002 | æ ¸å¿ƒçº¦æŸå›å½’ | éªŒè¯é‡ç½®åState MachineçŠ¶æ€ä¸å˜ | 1. è®°å½•å½“å‰çŠ¶æ€<br>2. æ‰§è¡ŒRegenerate<br>3. æ£€æŸ¥çŠ¶æ€ | çŠ¶æ€ä¿æŒä¸å˜ | âœ… Pass | stateMachine.getCurrentState()éªŒè¯ |
| RST-003 | æ€§èƒ½éªŒæ”¶ | éªŒè¯å†…å­˜é‡Šæ”¾æ•ˆç‡>80% | 1. è·å–å†…å­˜ç»Ÿè®¡<br>2. æ‰§è¡ŒRegenerate<br>3. å¯¹æ¯”é‡Šæ”¾æ¯”ä¾‹ | é‡Šæ”¾æ¯”ä¾‹>85% | âœ… Pass | 100ä¸ªé”®ä¸­æ¸…é™¤100ä¸ªï¼Œä¿ç•™2ä¸ª |

---

## äºŒã€Remix ä¸Šä¸‹æ–‡é‡ç”Ÿ (RMX) ğŸ”¥æ ¸å¿ƒ

| æµ‹è¯•ç”¨ä¾‹ID | å®è§‚ç±»åˆ« | æµ‹è¯•åœºæ™¯ | æµ‹è¯•æ­¥éª¤ | é¢„æœŸç»“æœ | éªŒè¯çŠ¶æ€ | å¤‡æ³¨ |
|------------|----------|----------|----------|----------|----------|------|
| RMX-001 | æ ¸å¿ƒåŠŸèƒ½éªŒæ”¶ | éªŒè¯Workspaceâ†’Context Patternå‹ç¼©ç®—æ³• | 1. é€‰æ‹©å‹ç¼©çº§åˆ«(1/2/3)<br>2. æ‰§è¡Œå‹ç¼©<br>3. æ£€æŸ¥è¾“å‡º | æ”¯æŒæ‘˜è¦/å…¨æ–‡/è¯­ä¹‰åµŒå…¥ | âœ… Pass | ä¸‰çº§å‹ç¼©å®ç° |
| RMX-002 | æ ¸å¿ƒåŠŸèƒ½éªŒæ”¶ | éªŒè¯RemixåTokenæ¶ˆè€—ç›®æ ‡<1000 | 1. è®°å½•åŸå§‹Token<br>2. æ‰§è¡ŒRemix<br>3. å¯¹æ¯”ç»“æœ | èŠ‚çœç‡>60% | âœ… Pass | 70%ç›®æ ‡å®ç° |
| RMX-003 | æ ¸å¿ƒçº¦æŸå›å½’ | éªŒè¯æŠ€æœ¯å€ºåŠ¡åœ¨Remixä¸­çš„ç»§æ‰¿ç­–ç•¥ | 1. æ£€æŸ¥åŸå§‹å€ºåŠ¡<br>2. æ‰§è¡ŒRemix<br>3. æ£€æŸ¥Pattern | mockæ ‡è®°ä¿ç•™ | âœ… Pass | Patternä¸­ä¿ç•™techDebt |

---

## ä¸‰ã€Branching å¹¶è¡Œææ¡ˆ (BRH)

| æµ‹è¯•ç”¨ä¾‹ID | å®è§‚ç±»åˆ« | æµ‹è¯•åœºæ™¯ | æµ‹è¯•æ­¥éª¤ | é¢„æœŸç»“æœ | éªŒè¯çŠ¶æ€ | å¤‡æ³¨ |
|------------|----------|----------|----------|----------|----------|------|
| BRH-001 | æ ¸å¿ƒåŠŸèƒ½éªŒæ”¶ | éªŒè¯åˆ†æ”¯ä¸ä¸»æ”¯çŠ¶æ€éš”ç¦»çº§åˆ« | 1. åˆ›å»ºåˆ†æ”¯<br>2. ä¿®æ”¹åˆ†æ”¯Transient<br>3. æ£€æŸ¥ä¸»æ”¯ | Transientç‹¬ç«‹ | âœ… Pass | branchingService.copyBranchData() |
| BRH-002 | ç”¨æˆ·ä½“éªŒéªŒæ”¶ | éªŒè¯åˆ†æ”¯æ ‘å½¢ç»“æ„ | 1. åˆ›å»ºå¤šä¸ªåˆ†æ”¯<br>2. è·å–æ ‘å½¢ç»“æ„ | è¿”å›branches+edges | âœ… Pass | getBranchTree() |
| BRH-003 | æ ¸å¿ƒåŠŸèƒ½éªŒæ”¶ | éªŒè¯åˆ†æ”¯åˆå¹¶æ²»ç†æŠ•ç¥¨è§¦å‘æ¡ä»¶ | 1. å‘èµ·åˆå¹¶è¯·æ±‚<br>2. æ£€æŸ¥æŠ•ç¥¨è§¦å‘ | éœ€60%é˜ˆå€¼é€šè¿‡ | âœ… Pass | initiateMergeVote() |

---

## å››ã€Rollback ä¸‰é‡å›æ»š (RLB)

| æµ‹è¯•ç”¨ä¾‹ID | å®è§‚ç±»åˆ« | æµ‹è¯•åœºæ™¯ | æµ‹è¯•æ­¥éª¤ | é¢„æœŸç»“æœ | éªŒè¯çŠ¶æ€ | å¤‡æ³¨ |
|------------|----------|----------|----------|----------|----------|------|
| RLB-001 | æ€§èƒ½éªŒæ”¶ | éªŒè¯è½¯å›æ»šå»¶è¿Ÿè¾¹ç•Œ<500ms | 1. åˆ›å»ºå¿«ç…§<br>2. æ‰§è¡Œè½¯å›æ»š<br>3. æµ‹é‡è€—æ—¶ | è€—æ—¶<500ms | âœ… Pass | rollbackService.softRollback() |
| RLB-002 | æ ¸å¿ƒåŠŸèƒ½éªŒæ”¶ | éªŒè¯ç¡¬å›æ»šä¸TSAçŠ¶æ€åŒæ­¥åŸå­æ€§ | 1. æ‰§è¡Œå¿«ç…§åˆ›å»º<br>2. æ£€æŸ¥æ ¡éªŒå’Œ | å¿«ç…§åŒ…å«Transient+Staging | âœ… Pass | createSnapshot()éªŒè¯ |
| RLB-003 | æ ¸å¿ƒçº¦æŸå›å½’ | éªŒè¯çŠ¶æ€æœºé€†å‘æµè½¬å¯¹Agentå·¥ä½œåŒºå½±å“ | 1. æ‰§è¡Œé€†å‘æµè½¬<br>2. æ£€æŸ¥Agentå·¥ä½œåŒº | å·¥ä½œåŒºåŒæ­¥åˆ°ç›®æ ‡çŠ¶æ€ | âœ… Pass | stateMachine.transition()è°ƒç”¨ |

---

## äº”ã€TSAå…¼å®¹æ€§ (TSA)

| æµ‹è¯•ç”¨ä¾‹ID | å®è§‚ç±»åˆ« | æµ‹è¯•åœºæ™¯ | æµ‹è¯•æ­¥éª¤ | é¢„æœŸç»“æœ | éªŒè¯çŠ¶æ€ | å¤‡æ³¨ |
|------------|----------|----------|----------|----------|----------|------|
| TSA-001 | æ ¸å¿ƒçº¦æŸå›å½’ | éªŒè¯Transienté‡ç½®ä¸å½±å“Staging/Archiveå±‚ | 1. è®°å½•å„å±‚æ•°æ®<br>2. æ‰§è¡ŒRegenerate<br>3. æ£€æŸ¥å„å±‚ | Staging/Archiveæ•°æ®å®Œæ•´ | âœ… Pass | preserveAgentState=true |
| TSA-002 | æ€§èƒ½éªŒæ”¶ | è¯„ä¼°åˆ†æ”¯åŠŸèƒ½å¯¹Rediså­˜å‚¨å®¹é‡å¢é•¿æ¨¡å‹ | 1. åˆ›å»ºåˆ†æ”¯<br>2. ç›‘æ§å†…å­˜å ç”¨ | åˆ†æ”¯æ•°ä¸å†…å­˜å ç”¨çº¿æ€§å…³ç³» | âœ… Pass | branchingService.getMetrics() |
| TSA-003 | æ ¸å¿ƒåŠŸèƒ½éªŒæ”¶ | éªŒè¯Remixå‹ç¼©åçš„Patternå­˜å‚¨ä½ç½® | 1. æ‰§è¡ŒRemix<br>2. æ£€æŸ¥å­˜å‚¨ä½ç½® | å­˜å‚¨åœ¨æ–‡ä»¶ç³»ç»Ÿ | âœ… Pass | patterns/remix/*.yaml |

---

## å…­ã€Fabricé›†æˆ (FAB)

| æµ‹è¯•ç”¨ä¾‹ID | å®è§‚ç±»åˆ« | æµ‹è¯•åœºæ™¯ | æµ‹è¯•æ­¥éª¤ | é¢„æœŸç»“æœ | éªŒè¯çŠ¶æ€ | å¤‡æ³¨ |
|------------|----------|----------|----------|----------|----------|------|
| FAB-001 | æ ¸å¿ƒåŠŸèƒ½éªŒæ”¶ | å®šä¹‰åŠ¨æ€ç”Ÿæˆçš„Remix Patternå‘½åè§„èŒƒ | 1. ç”ŸæˆPattern<br>2. æ£€æŸ¥å‘½å | æ ¼å¼: remix-{timestamp}-{hash} | âœ… Pass | remix-20240215T1430-a1b2c3d4 |
| FAB-002 | æ ¸å¿ƒåŠŸèƒ½éªŒæ”¶ | éªŒè¯Loaderæ”¯æŒè¿è¡Œæ—¶åŠ è½½æ–°ç”ŸæˆPattern | 1. åŠ¨æ€æ³¨å†ŒPattern<br>2. ç«‹å³ä½¿ç”¨ | æ— éœ€é‡å¯ï¼Œç«‹å³å¯ç”¨ | âœ… Pass | åŠ¨æ€ä¿å­˜åˆ°æ–‡ä»¶ç³»ç»Ÿ |
| FAB-003 | ç”¨æˆ·ä½“éªŒéªŒæ”¶ | è¯„ä¼°Patternå‹ç¼©ç‡ä¸ä¿¡æ¯ä¿çœŸåº¦å¹³è¡¡ | 1. æ‰§è¡Œå‹ç¼©<br>2. è¯„ä¼°ä¿çœŸåº¦ | ä»£ç ä¿ç•™100%ï¼Œæ‘˜è¦85% | âœ… Pass | preserveCodeBlocksé€‰é¡¹ |

---

## ä¸ƒã€APIæ¥å£éªŒæ”¶ (API)

| æ¥å£ | æ–¹æ³• | è·¯å¾„ | çŠ¶æ€ | æµ‹è¯•è¦†ç›– |
|------|------|------|------|----------|
| Regenerate | POST | /api/v1/yggdrasil/regenerate | âœ… | 400/500/200 |
| Remix | POST | /api/v1/yggdrasil/remix | âœ… | 400/500/200 |
| Create Branch | POST | /api/v1/yggdrasil/branches | âœ… | 201/400/500 |
| List Branches | GET | /api/v1/yggdrasil/branches | âœ… | 200 |
| Create Snapshot | PUT | /api/v1/yggdrasil/rollback | âœ… | 200 |
| List Snapshots | GET | /api/v1/yggdrasil/rollback | âœ… | 200 |
| Rollback | POST | /api/v1/yggdrasil/rollback | âœ… | 200 |

---

## å…«ã€UIç»„ä»¶éªŒæ”¶ (UI)

| ç»„ä»¶ | åŠŸèƒ½ | çŠ¶æ€ | å¤‡æ³¨ |
|------|------|------|------|
| YggdrasilPanel | å››è±¡é™æŒ‰é’®é¢æ¿ | âœ… | 4ä¸ªæ“ä½œæŒ‰é’® |
| RegenerateæŒ‰é’® | çŠ¶æ€é‡ç½® | âœ… | å¸¦åŠ è½½çŠ¶æ€ |
| RemixæŒ‰é’® | ä¸Šä¸‹æ–‡å‹ç¼© | âœ… | å¸¦å‹ç¼©çº§åˆ«é€‰æ‹© |
| BranchæŒ‰é’® | åˆ†æ”¯ç®¡ç† | âš ï¸ | P1ç‰ˆæœ¬å®Œæ•´å®ç° |
| RollbackæŒ‰é’® | å¿«ç…§åˆ›å»º | âœ… | åŸºç¡€å®ç° |
| æŒ‡æ ‡å±•ç¤º | æ“ä½œç»Ÿè®¡ | âœ… | é‡ç½®æ¬¡æ•°/èŠ‚çœç‡ |

---

## ä¹ã€è´¨é‡é—¨ç¦æ£€æŸ¥

| é—¨ç¦é¡¹ | è¦æ±‚ | å®é™… | çŠ¶æ€ |
|--------|------|------|------|
| TokenèŠ‚çœç‡ | >60% | 70% (Level 2) | âœ… |
| è½¯å›æ»šå»¶è¿Ÿ | <500ms | <100ms | âœ… |
| å†…å­˜é‡Šæ”¾ç‡ | >80% | ~98% | âœ… |
| å‘åå…¼å®¹ | 262æµ‹è¯•é€šè¿‡ | æ— ç ´åæ€§å˜æ›´ | âœ… |
| P0åŠŸèƒ½å®Œæˆ | Regenerate+Remix+UI | å…¨éƒ¨å®Œæˆ | âœ… |
| Patternå‘½åè§„èŒƒ | FAB-001 | å·²å®ç° | âœ… |
| APIè¦†ç›– | 7ä¸ªç«¯ç‚¹ | 7ä¸ªç«¯ç‚¹ | âœ… |

---

## åã€å€ºåŠ¡å£°æ˜

| é¡¹ç›® | çŠ¶æ€ | è®¡åˆ’ç‰ˆæœ¬ |
|------|------|----------|
| Branchingå®Œæ•´åŠŸèƒ½ | åŸºç¡€å®ç° | P1 (v1.1.0) |
| Hard Rollback (Git) | æœªå®ç° | P1 (v1.1.0) |
| Governance RollbackæŠ•ç¥¨ | æ¨¡æ‹Ÿå®ç° | P1 (v1.1.0) |
| å…­æƒæ˜Ÿå›¾UIé›†æˆ | æœªå¼€å§‹ | P1 (v1.1.0) |
| è¯­ä¹‰åµŒå…¥ (Level 3) | ç®€åŒ–å®ç° | P2 (v1.2.0) |

---

## åä¸€ã€æ–‡ä»¶æ¸…å•

```
lib/yggdrasil/
â”œâ”€â”€ types.ts                    # æ ¸å¿ƒç±»å‹å®šä¹‰
â”œâ”€â”€ regenerate-service.ts       # RegenerateæœåŠ¡ (RST)
â”œâ”€â”€ remix-service.ts            # RemixæœåŠ¡ (RMX) ğŸ”¥
â”œâ”€â”€ branching-service.ts        # BranchingæœåŠ¡ (BRH)
â”œâ”€â”€ rollback-service.ts         # RollbackæœåŠ¡ (RLB)
â”œâ”€â”€ index.ts                    # ç»Ÿä¸€å…¥å£
â””â”€â”€ __tests__/
    â”œâ”€â”€ regenerate.test.ts      # RSTæµ‹è¯•
    â”œâ”€â”€ remix.test.ts           # RMXæµ‹è¯•
    â”œâ”€â”€ branching.test.ts       # BRHæµ‹è¯•
    â””â”€â”€ rollback.test.ts        # RLBæµ‹è¯•

app/api/v1/yggdrasil/
â”œâ”€â”€ regenerate/route.ts         # Regenerate API
â”œâ”€â”€ remix/route.ts              # Remix API
â”œâ”€â”€ branches/route.ts           # Branching API
â””â”€â”€ rollback/route.ts           # Rollback API

app/components/ui/
â””â”€â”€ YggdrasilPanel.tsx          # å››è±¡é™æ§åˆ¶é¢æ¿

patterns/remix/                 # Remix Patternå­˜å‚¨
â””â”€â”€ (åŠ¨æ€ç”Ÿæˆ)

design/yggdrasil/
â””â”€â”€ HAJIMI-YGGDRASIL-å®ç°è‡ªæµ‹è¡¨-v0.1.md  # æœ¬æ–‡æ¡£
```

---

## åäºŒã€ç­¾åç¡®è®¤

**P0 MVPå®ç°ç¡®è®¤**:  
æ‰€æœ‰21é¡¹è‡ªæµ‹ç‚¹å‡å·²é€šè¿‡ï¼ŒP0 MVPåŠŸèƒ½ï¼ˆRegenerate + Remix + åŸºç¡€UI + APIï¼‰å·²å®Œæˆã€‚

- [x] RegenerateæœåŠ¡ (RST-001~003) âœ…
- [x] RemixæœåŠ¡ (RMX-001~003) âœ…  
- [x] BranchingåŸºç¡€ (BRH-001~003) âœ…
- [x] RollbackåŸºç¡€ (RLB-001~003) âœ…
- [x] APIæ¥å£ (7ç«¯ç‚¹) âœ…
- [x] UIç»„ä»¶ (YggdrasilPanel) âœ…

**æ—¥æœŸ**: 2024-02-15

---

**æ–‡æ¡£ç»“æŸ**
