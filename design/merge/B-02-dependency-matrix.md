# B-02 ä¾èµ–å†²çªæ£€æŸ¥æŠ¥å‘Š

**å·¥å•ç¼–å·**: HAJIMI-MERGE-V140-VALIDATION B-02/09  
**ä»»åŠ¡**: ä¾èµ–å†²çªæ£€æŸ¥ - package.json ä¾èµ–ç‰ˆæœ¬å†²çªåˆ†æ  
**æ£€æŸ¥æ—¥æœŸ**: 2026-02-17  
**åŸºçº¿ç‰ˆæœ¬**: v1.4.0 / v2.1.0  
**LCRæ–°å¢ä¾èµ–**: idb, simple-peer, msgpack-lite

---

## ä¾èµ–çŸ©é˜µ

| åŒ…å | v1.4.0/v2.1.0ç‰ˆæœ¬ | LCRéœ€æ±‚ | å†²çªç­‰çº§ | å¤‡æ³¨ |
|------|------------------|---------|----------|------|
| **onnxruntime-web** | âŒ æœªå®‰è£… | âŒ æœªè¦†ç›– | ğŸŸ¢ **æ— å†²çª** | å½“å‰åŸºçº¿æœªåŒ…å«ï¼ŒLCRæœªå¼•å…¥ |
| **@tensorflow/tfjs** | âŒ æœªå®‰è£… | âŒ æœªè¦†ç›– | ğŸŸ¢ **æ— å†²çª** | tfjs ç³»åˆ—æœªä½¿ç”¨ |
| **idb** | âŒ æœªå®‰è£… | âœ… v7.1.1 | ğŸŸ¢ **æ— å†²çª** | LCR æ–°å¢ï¼Œç‰ˆæœ¬ 7.1.1 ç¨³å®š |
| **simple-peer** | âŒ æœªå®‰è£… | âœ… æœ€æ–°ç‰ˆ | ğŸŸ¢ **æ— å†²çª** | LCR æ–°å¢ï¼Œéœ€é…åˆ @types/simple-peer |
| **msgpack-lite** | âŒ æœªå®‰è£… | âœ… æœ€æ–°ç‰ˆ | ğŸŸ¢ **æ— å†²çª** | LCR æ–°å¢ï¼Œæ¶ˆæ¯åºåˆ—åŒ–åº“ |
| **@types/simple-peer** | âŒ æœªå®‰è£… | âœ… éœ€å®‰è£… | ğŸŸ¡ **éœ€ç¡®è®¤** | LCR éœ€æ·»åŠ ç±»å‹å®šä¹‰ |

---

## å…³é”®å‘ç°

### MERGE-004: onnxruntime-web

**çŠ¶æ€**: âœ… **é€šè¿‡** - ç‰ˆæœ¬å”¯ä¸€æ€§ç¡®è®¤

**åˆ†æè¯¦æƒ…**:
- å½“å‰ package.json (v2.1.0) ä¸­ **æœªåŒ…å« onnxruntime-web**
- åŸºçº¿ v1.4.0 åŸè®¡åˆ’ä½¿ç”¨ onnxruntime-web v1.17.0
- LCR åˆ†æ”¯æœªå¼•å…¥ onnxruntime-web ä¾èµ–
- **ç»“è®º**: onnxruntime-web åœ¨å½“å‰åˆå¹¶èŒƒå›´å†…ä¸å­˜åœ¨ç‰ˆæœ¬å†²çª

**å»ºè®®**:
- è‹¥æœªæ¥éœ€è¦å¼•å…¥ onnxruntime-webï¼Œå»ºè®®é”å®šç‰ˆæœ¬ä¸º `1.17.0`
- æ³¨æ„ `@xenova/transformers` å¯èƒ½é—´æ¥ä¾èµ– onnxruntimeï¼Œéœ€é€šè¿‡ `npm ls` æ£€æŸ¥å®é™…å®‰è£…çš„å­ä¾èµ–ç‰ˆæœ¬

```bash
# éªŒè¯å‘½ä»¤
npm ls onnxruntime-web
```

---

### MERGE-005: idb ç‰ˆæœ¬å…¼å®¹

**çŠ¶æ€**: âœ… **é€šè¿‡** - ç‰ˆæœ¬å…¼å®¹ç¡®è®¤

**åˆ†æè¯¦æƒ…**:
- å½“å‰åŸºçº¿: **æœªå®‰è£… idb**
- LCR éœ€æ±‚: **idb v7.1.1**
- **å†²çªç­‰çº§**: æ— å†²çªï¼ˆæ–°å¢ä¾èµ–ï¼‰

**ç‰ˆæœ¬å…¼å®¹æ€§**:
- idb v7.1.1 æ˜¯ IndexedDB çš„ Promise å°è£…åº“
- v7.x ä¸ºå½“å‰ä¸»æµç¨³å®šç‰ˆæœ¬
- ä¸ç°æœ‰ä¾èµ–æ— å·²çŸ¥å†²çª

**å»ºè®®å®‰è£…å‘½ä»¤**:
```bash
npm install idb@7.1.1
```

---

### MERGE-006: TypeScript ç±»å‹å®šä¹‰æ£€æŸ¥

**çŠ¶æ€**: ğŸŸ¡ **éœ€å…³æ³¨** - ç±»å‹å®šä¹‰å¾…ç¡®è®¤

**åˆ†æè¯¦æƒ…**:
| ç±»å‹åŒ… | å½“å‰çŠ¶æ€ | LCRéœ€æ±‚ | é£é™©ç­‰çº§ |
|--------|----------|---------|----------|
| @types/simple-peer | âŒ æœªå®‰è£… | âœ… éœ€è¦ | ğŸŸ¡ ä¸­ç­‰ |
| @types/msgpack-lite | âŒ æœªå®‰è£… | âšª å¯é€‰ | ğŸŸ¢ ä½ |

**simple-peer ç±»å‹å®šä¹‰**:
- simple-peer åº“æœ¬èº«å¯èƒ½åŒ…å«ç±»å‹å®šä¹‰æˆ–éœ€è¦ @types/simple-peer
- éœ€ç¡®è®¤å®‰è£…å TypeScript ç¼–è¯‘æ˜¯å¦é€šè¿‡
- å»ºè®®åœ¨ LCR åˆå¹¶åæ‰§è¡Œ `npm run type-check` éªŒè¯

**å»ºè®®æ“ä½œ**:
```bash
# å®‰è£… simple-peer åŠå…¶ç±»å‹å®šä¹‰
npm install simple-peer
npm install --save-dev @types/simple-peer

# éªŒè¯ç±»å‹æ£€æŸ¥
npm run type-check
```

---

## ä¾èµ–å…³ç³»æ·±åº¦åˆ†æ

### é—´æ¥ä¾èµ–æ£€æŸ¥

é€šè¿‡åˆ†æç°æœ‰ä¾èµ–ï¼Œä»¥ä¸‹åŒ…å¯èƒ½ä¸ç›®æ ‡ä¾èµ–å­˜åœ¨é—´æ¥å…³ç³»ï¼š

| ç°æœ‰ä¾èµ– | æ½œåœ¨å…³è” | é£é™© |
|----------|----------|------|
| @xenova/transformers | å¯èƒ½é—´æ¥ä¾èµ– onnxruntime | ä½ |
| next (14.1.0) | ä½¿ç”¨ Webpack 5ï¼Œéœ€æ£€æŸ¥ browser polyfills | ä¸­ |
| ws | ä¸ simple-peer çš„ WebSocket åŠŸèƒ½å¯èƒ½å†²çª | ä½ |

**å»ºè®®éªŒè¯**:
```bash
# æ£€æŸ¥ onnxruntime æ˜¯å¦è¢«é—´æ¥ä¾èµ–
npm ls onnxruntime-web 2>/dev/null || echo "æœªå®‰è£… onnxruntime-web"

# æ£€æŸ¥æ‰€æœ‰å·²å®‰è£…ç‰ˆæœ¬
npm list --depth=0
```

---

## å»ºè®®æ“ä½œ

### å³æ—¶æ“ä½œ

1. **æ¥å— LCR ä¾èµ–æ·»åŠ ** (æ— å†²çª)
   ```bash
   npm install idb@7.1.1 simple-peer msgpack-lite
   npm install --save-dev @types/simple-peer
   ```

2. **ç±»å‹æ£€æŸ¥éªŒè¯**
   ```bash
   npm run type-check
   ```

3. **å®‰è£…åæµ‹è¯•**
   ```bash
   npm test
   ```

### åç»­ç›‘æ§

| é¡¹ç›® | è¡ŒåŠ¨ | è´Ÿè´£äºº |
|------|------|--------|
| onnxruntime-web ç‰ˆæœ¬ | è‹¥æœªæ¥å¼•å…¥ï¼Œé”å®š v1.17.0 | å¼€å‘å›¢é˜Ÿ |
| idb å‡çº§è·¯å¾„ | ç›‘æ§ v8.x é‡å¤§å˜æ›´ | ç»´æŠ¤å›¢é˜Ÿ |
| @types/simple-peer | ç¡®è®¤ä¸ simple-peer ç‰ˆæœ¬åŒ¹é… | å¼€å‘å›¢é˜Ÿ |

---

## ç»“è®º

**MERGE-004**: âœ… é€šè¿‡ - onnxruntime-web æœªåœ¨å½“å‰èŒƒå›´å†…ï¼Œç‰ˆæœ¬å”¯ä¸€æ€§æ— é—®é¢˜  
**MERGE-005**: âœ… é€šè¿‡ - idb v7.1.1 ä¸ºæ–°å¢ä¾èµ–ï¼Œæ— ç‰ˆæœ¬å†²çª  
**MERGE-006**: ğŸŸ¡ éœ€ç¡®è®¤ - @types/simple-peer éœ€è¦å®‰è£…ï¼Œå»ºè®®åˆå¹¶åéªŒè¯ç±»å‹æ£€æŸ¥

**æ•´ä½“è¯„ä¼°**: ä¾èµ–å†²çªæ£€æŸ¥ **é€šè¿‡**ï¼ŒLCR æ–°å¢ä¾èµ–å¯å®‰å…¨åˆå¹¶ã€‚

---

*æŠ¥å‘Šç”Ÿæˆæ—¶é—´: 2026-02-17*  
*éªŒè¯å·¥å…·: package.json é™æ€åˆ†æ*
