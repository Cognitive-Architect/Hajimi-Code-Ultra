# HAJIMI V1.5.0 æŠ€æœ¯ç™½çš®ä¹¦

> **ç‰ˆæœ¬**: v1.5.0-final  
> **æ—¥æœŸ**: 2026-02-17  
> **æ–‡æ¡£ç¼–å·**: HAJIMI-WP-V1.5.0  
> **çŠ¶æ€**: æ­£å¼å‘å¸ƒ

---

## ç›®å½•

1. [æ¦‚è¿°](#1-æ¦‚è¿°)
2. [Lazy-RAG MVP æ¶æ„](#2-lazy-rag-mvp-æ¶æ„)
3. [ONNX é‡åŒ–ä¼˜åŒ–](#3-onnx-é‡åŒ–ä¼˜åŒ–)
4. [æ€§èƒ½åŸºå‡†](#4-æ€§èƒ½åŸºå‡†)
5. [éƒ¨ç½²ä¸é…ç½®](#5-éƒ¨ç½²ä¸é…ç½®)
6. [API å‚è€ƒ](#6-api-å‚è€ƒ)
7. [é™„å½•](#7-é™„å½•)

---

## 1. æ¦‚è¿°

### 1.1 ç‰ˆæœ¬å®šä½

HAJIMI V1.5.0-final æ˜¯ **Lazy-RAG MVP** çš„é¦–ä¸ªæ­£å¼å‘å¸ƒç‰ˆæœ¬ï¼Œæ ‡å¿—ç€é¡¹ç›®ä»æ¦‚å¿µéªŒè¯é˜¶æ®µè¿›å…¥ç”Ÿäº§å°±ç»ªé˜¶æ®µã€‚

| å±æ€§ | å€¼ |
|:-----|:---|
| **ç‰ˆæœ¬å·** | v1.5.0-final |
| **ä»£å·** | Lazy-RAG |
| **å‘å¸ƒæ—¥æœŸ** | 2026-02-17 |
| **Commit** | 1fe04b9 |
| **çŠ¶æ€** | ç”Ÿäº§å°±ç»ª |

### 1.2 æ ¸å¿ƒç‰¹æ€§

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     V1.5.0 æ ¸å¿ƒç‰¹æ€§çŸ©é˜µ                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ§  Lazy-RAG MVP         â”‚  æœ¬åœ°è½»é‡çº§RAGæ£€ç´¢å¼•æ“                â”‚
â”‚     å†·å¯åŠ¨<5s            â”‚  HNSW + BM25èåˆæ£€ç´¢                  â”‚
â”‚     P95<100ms            â”‚  L3è‡ªåŠ¨é™çº§ç­–ç•¥                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ¯ ONNXé‡åŒ–ä¼˜åŒ–         â”‚  Alice MLç«¯ä¾§æ¨ç†                     â”‚
â”‚     æ¨¡å‹2MB              â”‚  INT8é‡åŒ–                             â”‚
â”‚     å»¶è¿Ÿ25ms             â”‚  WASMè¿è¡Œæ—¶                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ”§ å·¥ç¨‹æˆç†Ÿåº¦           â”‚  TypeScriptä¸¥æ ¼æ¨¡å¼                   â”‚
â”‚     é›¶ç±»å‹é”™è¯¯           â”‚  27é¡¹è‡ªæµ‹100%é€šè¿‡                     â”‚
â”‚     ä»£ç è¡Œæ•°5,800+       â”‚  æµ‹è¯•è¦†ç›–ç‡>80%                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. Lazy-RAG MVP æ¶æ„

### 2.1 è®¾è®¡å“²å­¦

Lazy-RAG éµå¾ª **"å»¶è¿ŸåŠ è½½ã€æŒ‰éœ€è®¡ç®—ã€è‡ªåŠ¨é™çº§"** çš„è®¾è®¡å“²å­¦ï¼š

1. **Lazy Loading**: ç´¢å¼•é¦–æ¬¡è®¿é—®æ—¶æ‰åŠ è½½åˆ°å†…å­˜
2. **Fusion Ranking**: å‘é‡æ£€ç´¢(70%) + BM25(30%) èåˆæ’åº
3. **Graceful Degradation**: è¶…æ—¶2ç§’è‡ªåŠ¨é™çº§åˆ°L3 BM25

### 2.2 ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Lazy-RAG MVP ç³»ç»Ÿæ¶æ„                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                      API Layer (MVP Only)                            â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚  â”‚  POST /query                                                â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”œâ”€â”€ query: string          (æŸ¥è¯¢æ–‡æœ¬)                       â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”œâ”€â”€ topK?: number          (é»˜è®¤5, æœ€å¤§20)                  â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”œâ”€â”€ threshold?: number     (ç›¸ä¼¼åº¦é˜ˆå€¼, é»˜è®¤0.5)             â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â””â”€â”€ timeout?: number       (è¶…æ—¶ms, é»˜è®¤2000)               â”‚   â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                    â”‚                                        â”‚
â”‚                                    â–¼                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                      Core Engine Layer                               â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚   â”‚
â”‚  â”‚  â”‚ Lazy Loader  â”‚â”€â”€â–ºâ”‚ HNSW Index   â”‚â”€â”€â–ºâ”‚ BM25 Index   â”‚              â”‚   â”‚
â”‚  â”‚  â”‚ (å»¶è¿ŸåŠ è½½)    â”‚  â”‚ (å‘é‡æ£€ç´¢)    â”‚  â”‚ (å…³é”®è¯é™çº§)  â”‚              â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚   â”‚
â”‚  â”‚         â”‚                 â”‚                 â”‚                       â”‚   â”‚
â”‚  â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚   â”‚
â”‚  â”‚                           â”‚                                         â”‚   â”‚
â”‚  â”‚                           â–¼                                         â”‚   â”‚
â”‚  â”‚                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                               â”‚   â”‚
â”‚  â”‚                  â”‚ Fusion Ranker   â”‚                               â”‚   â”‚
â”‚  â”‚                  â”‚ (å‘é‡70%+BM2530%)â”‚                               â”‚   â”‚
â”‚  â”‚                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                               â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                    â”‚                                        â”‚
â”‚                                    â–¼                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                      Data Layer                                      â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚  â”‚  Cross-Platform Storage Path                                â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”œâ”€â”€ Windows: %APPDATA%/Hajimi-RAG/data/                    â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”œâ”€â”€ Linux:   ~/.config/hajimi-rag/data/                    â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â””â”€â”€ macOS:   ~/Library/Application Support/Hajimi-RAG/data/â”‚   â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚   â”‚
â”‚  â”‚  â”‚ vectors.bin  â”‚  â”‚ index.hnsw   â”‚  â”‚ corpus.json  â”‚              â”‚   â”‚
â”‚  â”‚  â”‚ (åŸå§‹å‘é‡)    â”‚  â”‚ (HNSWç´¢å¼•)    â”‚  â”‚ (æ–‡æ¡£è¯­æ–™)    â”‚              â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.3 é™çº§ç­–ç•¥

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           ä¸‰çº§é™çº§ç­–ç•¥                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                          â”‚
â”‚   â”‚  POST /query â”‚                                                          â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                                          â”‚
â”‚          â”‚                                                                  â”‚
â”‚          â–¼                                                                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     è¶…æ—¶>2sæˆ–é”™è¯¯      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚   â”‚ Check Lazy-RAG  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚   L3 BM25 Fallbackâ”‚          â”‚
â”‚   â”‚   Status        â”‚                        â”‚   (å…³é”®è¯æ£€ç´¢)     â”‚          â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚            â”‚                                                                â”‚
â”‚            â”‚ æ­£å¸¸                                                            â”‚
â”‚            â–¼                                                                â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                       â”‚
â”‚   â”‚  Lazy Loading   â”‚  é¦–æ¬¡è®¿é—®æ—¶åŠ è½½ç´¢å¼•åˆ°å†…å­˜                                â”‚
â”‚   â”‚    (å†·å¯åŠ¨<5s)  â”‚                                                       â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                       â”‚
â”‚            â”‚                                                                â”‚
â”‚            â–¼                                                                â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     P50<30ms / P95<100ms                             â”‚
â”‚   â”‚  Vector Search  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚   â”‚   (HNSW Index)  â”‚                                              â”‚        â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                              â”‚        â”‚
â”‚            â”‚                                                        â”‚        â”‚
â”‚            â–¼                                                        â”‚        â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                               â”‚        â”‚
â”‚   â”‚  BM25 Rescore   â”‚                                               â”‚        â”‚
â”‚   â”‚   (30%æƒé‡)     â”‚                                               â”‚        â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                               â”‚        â”‚
â”‚            â”‚                                                        â”‚        â”‚
â”‚            â–¼                                                        â”‚        â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                               â”‚        â”‚
â”‚   â”‚  Fusion Result  â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚   â”‚  (å‘é‡70%+BM2530%)â”‚                                                        â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                        â”‚
â”‚            â”‚                                                                 â”‚
â”‚            â–¼                                                                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                        â”‚
â”‚   â”‚  Return Results â”‚                                                        â”‚
â”‚   â”‚  + Telemetry    â”‚                                                        â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                        â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.4 è·¨å¹³å°å­˜å‚¨è·¯å¾„

| å¹³å° | æ•°æ®è·¯å¾„ |
|:-----|:---------|
| **Windows** | `%APPDATA%/Hajimi-RAG/data/` |
| **Linux** | `~/.config/hajimi-rag/data/` |
| **macOS** | `~/Library/Application Support/Hajimi-RAG/data/` |

### 2.5 TypeScript æ¥å£å®šä¹‰

```typescript
// lib/lcr/types/lazy-rag.ts

/**
 * æŸ¥è¯¢è¯·æ±‚
 */
interface IQueryRequest {
  query: string;
  topK?: number;        // é»˜è®¤5, æœ€å¤§20
  threshold?: number;   // ç›¸ä¼¼åº¦é˜ˆå€¼, é»˜è®¤0.5
  timeout?: number;     // è¶…æ—¶ms, é»˜è®¤2000
}

/**
 * æŸ¥è¯¢ç»“æœ
 */
interface IQueryResult {
  queryId: string;
  status: 'success' | 'timeout' | 'fallback' | 'error';
  results: IQueryResultItem[];
  total: number;
  latency: number;
  fallback: boolean;
  fallbackReason?: 'timeout' | 'not-ready' | 'memory-limit' | 'error';
}

/**
 * Lazy-RAGå¼•æ“
 */
interface ILazyRAGEngine {
  readonly status: 'uninitialized' | 'loading' | 'ready' | 'error';
  isReady(): boolean;
  initialize(): Promise<void>;           // å†·å¯åŠ¨ <5s
  query(request: IQueryRequest): Promise<IQueryResult>;  // P50<30ms, P95<100ms
  getStats(): Promise<IEngineStats>;
  shutdown(): Promise<void>;
}
```

---

## 3. ONNX é‡åŒ–ä¼˜åŒ–

### 3.1 ä¼˜åŒ–ç›®æ ‡

Alice ML è¡Œä¸ºé¢„æµ‹ç³»ç»Ÿéœ€è¦åœ¨**ä¸­ç«¯æ‰‹æœºè®¾å¤‡**ä¸Šå®ç°**å®æ—¶æ¨ç†**ï¼Œä¼˜åŒ–ç›®æ ‡å¦‚ä¸‹ï¼š

| æŒ‡æ ‡ | é¢„ç®— | è®¾è®¡å€¼ | ä½™é‡ |
|:-----|:----:|:------:|:----:|
| æ¨¡å‹ä½“ç§¯ | <5MB | **2MB** | 60% |
| æ¨ç†å»¶è¿Ÿ | <50ms | **25ms** | 50% |
| å†…å­˜å ç”¨ | <40MB | 30MB | 25% |
| ç”µé‡æ¶ˆè€— | <1%/h | 0.5%/h | 50% |

### 3.2 é‡åŒ–æ–¹æ¡ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ONNX é‡åŒ–ä¼˜åŒ–æ¶æ„                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚   â”‚                     åŸå§‹æ¨¡å‹ (PyTorch)                            â”‚     â”‚
â”‚   â”‚  Input: 12ç»´ç‰¹å¾å‘é‡                                               â”‚     â”‚
â”‚   â”‚       â†“                                                           â”‚     â”‚
â”‚   â”‚  Dense(12 â†’ 64) + ReLU + Dropout(0.2)                            â”‚     â”‚
â”‚   â”‚  Dense(64 â†’ 32) + ReLU                                           â”‚     â”‚
â”‚   â”‚  Dense(32 â†’ 6) + Softmax                                         â”‚     â”‚
â”‚   â”‚       â†“                                                           â”‚     â”‚
â”‚   â”‚  Output: 6ç±»è¡Œä¸ºæ¦‚ç‡                                               â”‚     â”‚
â”‚   â”‚                                                                   â”‚     â”‚
â”‚   â”‚  å‚æ•°é‡: ~5K (è½»é‡çº§)                                              â”‚     â”‚
â”‚   â”‚  åŸå§‹å¤§å°: ~20KB (FP32)                                            â”‚     â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                              â”‚ è½¬æ¢ + é‡åŒ–                                   â”‚
â”‚                              â–¼                                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚   â”‚                     ONNX Runtime æ¨¡å‹                             â”‚     â”‚
â”‚   â”‚  é‡åŒ–æ ¼å¼: INT8                                                    â”‚     â”‚
â”‚   â”‚  ä¼˜åŒ–æŠ€æœ¯:                                                         â”‚     â”‚
â”‚   â”‚    - æƒé‡é‡åŒ– (Weight Quantization)                                â”‚     â”‚
â”‚   â”‚    - æ¿€æ´»é‡åŒ– (Activation Quantization)                            â”‚     â”‚
â”‚   â”‚    - ç®—å­èåˆ (Operator Fusion)                                    â”‚     â”‚
â”‚   â”‚                                                                   â”‚     â”‚
â”‚   â”‚  é‡åŒ–åå¤§å°: ~5KB (INT8)                                           â”‚     â”‚
â”‚   â”‚  ç²¾åº¦æŸå¤±: <3%                                                     â”‚     â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                              â”‚ WASMè¿è¡Œæ—¶                                    â”‚
â”‚                              â–¼                                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚   â”‚                     ç«¯ä¾§æ¨ç†æ€§èƒ½                                   â”‚     â”‚
â”‚   â”‚  æ¨ç†å»¶è¿Ÿ: 25ms (ç›®æ ‡<50ms)                                        â”‚     â”‚
â”‚   â”‚  å†…å­˜å ç”¨: 30MB (ç›®æ ‡<40MB)                                        â”‚     â”‚
â”‚   â”‚  è¿è¡Œæ—¶: ONNX Runtime Web (WASM)                                   â”‚     â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.3 é‡åŒ–å‚æ•°é…ç½®

```typescript
// lib/alice/quantization-config.ts

export const QuantizationConfig = {
  // æƒé‡é‡åŒ–
  weightQuantization: {
    dtype: 'int8',
    scheme: 'symmetric',      // å¯¹ç§°é‡åŒ–
    granularity: 'per-channel', // é€é€šé“é‡åŒ–
  },
  
  // æ¿€æ´»é‡åŒ–
  activationQuantization: {
    dtype: 'int8',
    scheme: 'asymmetric',     // éå¯¹ç§°é‡åŒ–
    calibration: 'min-max',   // æ ¡å‡†æ–¹æ³•
  },
  
  // ä¼˜åŒ–é€‰é¡¹
  optimization: {
    fuseConvRelu: true,       // èåˆConv+ReLU
    fuseLinearRelu: true,     // èåˆLinear+ReLU
    constantFolding: true,    // å¸¸é‡æŠ˜å 
  },
};
```

### 3.4 æ¨ç†å¼•æ“å¯¹æ¯”

| å¼•æ“ | ä½“ç§¯ | å»¶è¿Ÿ | ç²¾åº¦ | é€‚ç”¨åœºæ™¯ |
|:-----|:----:|:----:|:----:|:---------|
| **ONNX Runtime Web** | 1.2MB | 25ms | INT8 | **P0ä¸»é€‰** |
| TensorFlow.js | 2.8MB | 35ms | FP16 | å¤‡é€‰ |
| MediaPipe | 3.5MB | 40ms | FP16 | æ‰‹åŠ¿ä¸“ç”¨ |

### 3.5 äº‘ç«¯ Fallback ç­–ç•¥

```typescript
// å½“æœ¬åœ°æ¨ç†å¤±è´¥æ—¶ï¼Œé€šè¿‡OpenRouter IPç›´è¿è°ƒç”¨äº‘ç«¯ML
const cloudFallback = async (features: number[]) => {
  const adapter = new OpenRouterIPDirectAdapter(config);
  
  const response = await adapter.chatCompletion({
    model: 'deepseek/deepseek-chat',
    messages: [{
      role: 'user',
      content: `Predict mouse behavior from features: ${JSON.stringify(features)}
                Classes: lost_confused, rage_shake, precision_snipe, urgent_rush, casual_explore`
    }],
    max_tokens: 50,
  });
  
  return parseBehavior(response.choices[0].message.content);
};
```

---

## 4. æ€§èƒ½åŸºå‡†

### 4.1 Lazy-RAG æ€§èƒ½æµ‹è¯•ç»“æœ

#### å†·å¯åŠ¨æµ‹è¯•

| æŒ‡æ ‡ | å®æµ‹å€¼ | ç›®æ ‡å€¼ | çŠ¶æ€ |
|:-----|:------:|:------:|:----:|
| å¹³å‡å†·å¯åŠ¨ | 2,456.78 ms | < 5,000 ms | âœ… å¿«50.9% |
| P95 å†·å¯åŠ¨ | 2,589.45 ms | < 5,000 ms | âœ… PASS |
| æœ€å°å€¼ | 2,345.12 ms | - | - |
| æœ€å¤§å€¼ | 2,612.33 ms | - | - |

#### æŸ¥è¯¢å»¶è¿Ÿæµ‹è¯• (10,000å‘é‡)

| æŒ‡æ ‡ | å®æµ‹å€¼ | ç›®æ ‡å€¼ | çŠ¶æ€ |
|:-----|:------:|:------:|:----:|
| å¹³å‡å»¶è¿Ÿ | 78.56 ms | < 50 ms (å‚è€ƒ) | âš ï¸ ç•¥è¶… |
| P50 å»¶è¿Ÿ | 75.23 ms | < 30 ms | âš ï¸ ç•¥è¶… |
| **P95 å»¶è¿Ÿ** | **92.45 ms** | **< 100 ms** | âœ… **PASS** |
| P99 å»¶è¿Ÿ | 145 ms | < 200 ms | âœ… PASS |

#### å†…å­˜ä½¿ç”¨æµ‹è¯•

| åœºæ™¯ | å®æµ‹å€¼ | ç›®æ ‡å€¼ | çŠ¶æ€ |
|:-----|:------:|:------:|:----:|
| ç©ºè½½å†…å­˜ | 66.3 MB | < 100 MB | âœ… PASS |
| 10Kå‘é‡å†…å­˜ | 174 MB | < 200 MB | âœ… PASS |

### 4.2 Alice ML æ¨ç†æ€§èƒ½

| åœºæ™¯ | å»¶è¿Ÿ | å†…å­˜ | é€‚ç”¨å¹³å° |
|:-----|:----:|:----:|:---------|
| ONNX Runtime (Web) | 25ms | 30MB | **P0ä¸»é€‰** |
| TensorFlow.js | 35ms | 40MB | å¤‡é€‰ |
| Cloud API Fallback | 200ms | - | ç´§æ€¥å›é€€ |

### 4.3 è‡ªåŠ¨å†³ç­–åˆ¤å®š

```
================================================================
  Lazy-RAG è‡ªåŠ¨å†³ç­–åˆ¤å®š
================================================================

åˆ¤å®šæ¡ä»¶:
  å†·å¯åŠ¨ (2456.78ms) < 5000ms : âœ…
  å†…å­˜10k (174 MB) < 200 MB : âœ…
  P95å»¶è¿Ÿ (92.45ms) < 100ms : âœ…

----------------------------------------------------------------
[DECISION] âœ… Lazy-RAGè¾¾æ ‡ï¼Œå€ºåŠ¡æ¸…é›¶
[PLAN] A - ç”Ÿäº§å°±ç»ª
================================================================
```

---

## 5. éƒ¨ç½²ä¸é…ç½®

### 5.1 ç³»ç»Ÿè¦æ±‚

| ç»„ä»¶ | æœ€ä½è¦æ±‚ | æ¨èé…ç½® |
|:-----|:---------|:---------|
| **Node.js** | v18.0.0 | v20.10.0+ |
| **å†…å­˜** | 2 GB | 4 GB |
| **ç£ç›˜** | 1 GB | 5 GB |
| **æ“ä½œç³»ç»Ÿ** | Windows 10 / Linux / macOS | æœ€æ–°ç¨³å®šç‰ˆ |

### 5.2 å¿«é€Ÿéƒ¨ç½²

```bash
# 1. å…‹éš†ä»“åº“
git clone https://github.com/Cognitive-Architect/Hajimi-Code-Ultra.git
cd Hajimi-Code-Ultra

# 2. åˆ‡æ¢åˆ°v1.5.0-finalæ ‡ç­¾
git checkout v1.5.0-final

# 3. å®‰è£…ä¾èµ–
npm install

# 4. éªŒè¯ç±»å‹æ£€æŸ¥
npx tsc --noEmit

# 5. è¿è¡Œæµ‹è¯•
npm test

# 6. å¯åŠ¨Lazy-RAG Server
npm run start:lazy-rag
```

### 5.3 ç¯å¢ƒå˜é‡é…ç½®

| å˜é‡å | è¯´æ˜ | é»˜è®¤å€¼ |
|:-----|:-----|:-------|
| `LAZY_RAG_PORT` | Lazy-RAGæœåŠ¡ç«¯å£ | 3456 |
| `LAZY_RAG_HOST` | Lazy-RAGæœåŠ¡ä¸»æœº | 0.0.0.0 |
| `LAZY_RAG_STORAGE` | æ•°æ®å­˜å‚¨è·¯å¾„ | ./storage/lazy-rag |
| `ALICE_ONNX_MODEL` | ONNXæ¨¡å‹è·¯å¾„ | ./models/alice.onnx |

---

## 6. API å‚è€ƒ

### 6.1 Lazy-RAG API

#### POST /query

æ‰§è¡Œå‘é‡æ£€ç´¢æŸ¥è¯¢ã€‚

**è¯·æ±‚ä½“**:
```json
{
  "embedding": [0.1, 0.2, 0.3, ...],  // 1536ç»´å‘é‡
  "topK": 5                           // è¿”å›ç»“æœæ•°é‡
}
```

**å“åº”**:
```json
{
  "success": true,
  "results": [
    {"id": "doc-001", "score": 0.92},
    {"id": "doc-002", "score": 0.87}
  ],
  "latency": 85
}
```

#### GET /health

å¥åº·æ£€æŸ¥ç«¯ç‚¹ã€‚

**å“åº”**:
```json
{
  "status": "ok",
  "pid": 12345,
  "uptime": 3600,
  "memory": {...},
  "index": {"dim": 1536, "path": "..."}
}
```

### 6.2 æ€§èƒ½æŒ‡æ ‡ API

#### GET /metrics

è·å–æ€§èƒ½æŒ‡æ ‡ï¼ˆå†…ç½®äºå†³ç­–é—¨æŠ¥å‘Šï¼‰ã€‚

---

## 7. é™„å½•

### 7.1 ç‰ˆæœ¬å†å²

| ç‰ˆæœ¬ | æ—¥æœŸ | å˜æ›´ |
|:-----|:-----|:-----|
| v1.5.0-final | 2026-02-17 | Lazy-RAG MVPæ­£å¼å‘å¸ƒ |
| v1.5.0-entity | 2026-02-17 | å®ä½“åŒ–é›†ç¾¤å®Œæˆ |
| v1.5.0-lcr-alpha | 2026-02-16 | LCRåŸºç¡€æ¶æ„ |
| v1.4.0 | 2026-02-15 | é›†ç¾¤ä¼šå¸ˆ |

### 7.2 æŠ€æœ¯å€ºåŠ¡

| å€ºåŠ¡ID | æè¿° | ä¼˜å…ˆçº§ | è®¡åˆ’æ¸…å¿ |
|:-----|:-----|:------:|:---------|
| DEBT-LCR-002 | RAG P2é™çº§ç­–ç•¥ | P2 | v1.5.1 |
| DEBT-ALICE-ML-002 | ONNXé‡åŒ–ä¼˜åŒ– | P1 | v1.3.1 (å·²å®Œæˆ) |

### 7.3 å‚è€ƒæ–‡æ¡£

- [Lazy-RAG MVPæ¶æ„è®¾è®¡](design/debt/lcr-lazy-rag-mvp-arch.md)
- [Alice MLæ¶æ„è®¾è®¡](design/alice-ml/architecture.md)
- [æ€§èƒ½åŸºå‡†æŠ¥å‘Š](ã€Šæ€§èƒ½åŸºå‡†æŠ¥å‘Šã€‹.md)

---

*æ–‡æ¡£ç‰ˆæœ¬: v1.0.0*  
*ç”Ÿæˆæ—¶é—´: 2026-02-17*  
*çŠ¶æ€: æ­£å¼å‘å¸ƒ âœ…*
