# HAJIMI v1.5.0 README 白皮书 - 用户场景与功能映射

> **文档编号**: HAJIMI-v1.5.0-README-白皮书  
> **版本**: v1.0  
> **日期**: 2026-02-17  
> **工单**: B-06/09 Scenario场景与功能映射

---

## 目录

- [4. 用户场景](#4-用户场景)
  - [4.1 典型用户场景](#41-典型用户场景)
    - [4.1.1 场景A - 中学生开发者（Termux环境）](#411-场景a---中学生开发者termux环境)
    - [4.1.2 场景B - 跨设备同步（.hctx格式）](#412-场景b---跨设备同步hctx格式)
    - [4.1.3 场景C - 团队审计（债务追踪）](#413-场景c---团队审计债务追踪)
  - [4.2 功能映射表](#42-功能映射表)

---

## 4. 用户场景

### 4.1 典型用户场景

HAJIMI v1.5.0 针对不同类型的开发者群体，提供了差异化的功能支持。以下三个典型场景展示了系统如何满足多样化的开发需求。

---

#### 4.1.1 场景A - 中学生开发者（Termux环境）

> **用户画像**: 中学生开发者，预算有限，仅有 **1点额度**，使用 Android **Termux** 终端环境进行编程学习。

##### 场景描述

小明是一名对编程充满热情的中学生，他只有一部 Android 手机，没有电脑，也没有云服务器资源。他希望在任何地方都能学习编程，但传统的云端AI助手需要付费订阅，超出了他的预算。

##### 核心需求

| 需求维度 | 具体描述 | 痛点 |
|:---|:---|:---|
| **离线可用** | 无需网络连接即可使用AI编程助手 | 校园网络不稳定，流量有限 |
| **资源轻量** | 能在手机端流畅运行 | 设备性能有限，内存紧张 |
| **零云依赖** | 不依赖任何云端服务或API密钥 | 无信用卡，无法订阅付费服务 |
| **学习友好** | 适合初学者的交互方式 | 需要引导和示例 |

##### 技术方案

```
┌─────────────────────────────────────────────────────────────┐
│                   场景A: 中学生开发者                          │
│                    Termux + LCR本地运行时                      │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│   ┌─────────────┐         ┌───────────────────────┐        │
│   │  Android    │         │   Termux Terminal     │        │
│   │   Phone     │────────▶│  - Node.js Runtime    │        │
│   │  (1点额度)   │         │  - Git / Vim / SSH    │        │
│   └─────────────┘         └───────────┬───────────┘        │
│                                       │                     │
│                                       ▼                     │
│                          ┌───────────────────────┐         │
│                          │   LCR本地上下文运行时  │         │
│                          │   - 轻量级嵌入模型     │         │
│                          │   - 本地向量存储       │         │
│                          │   - 增量快照持久化     │         │
│                          └───────────┬───────────┘         │
│                                      │                      │
│                                      ▼                      │
│                          ┌───────────────────────┐         │
│                          │   Alice悬浮球UI       │         │
│                          │   - 七角色人格化交互   │         │
│                          │   - 离线主题切换      │         │
│                          │   - 本地代码高亮      │         │
│                          └───────────────────────┘         │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

**核心组件**:
- **LCR本地运行时**: 完全本地化运行，无需云端依赖
- **Alice悬浮球**: 轻量级UI，支持Termux终端内嵌显示
- **轻量嵌入模型**: MobileBERT/DistilBERT，支持NPU加速

**关键词验证**: ✅ **Termux**、✅ **1点额度**

---

#### 4.1.2 场景B - 跨设备同步（.hctx格式）

> **用户画像**: 多设备开发者，在台式机、笔记本、平板之间频繁切换，需要上下文无缝同步。

##### 场景描述

小李是一名全栈开发者，他在家里的台式机进行深度开发，在公司的笔记本处理紧急需求，在平板上进行代码审查。他需要在不同设备间保持开发上下文的一致性，传统的Git提交无法满足"工作态"上下文的实时同步需求。

##### 核心需求

| 需求维度 | 具体描述 | 痛点 |
|:---|:---|:---|
| **上下文同步** | 会话历史、代码片段、思考过程跨设备同步 | 换设备后"失忆"，需要重新说明需求 |
| **实时性** | 近乎即时的同步体验 | 等待云同步太慢，影响心流 |
| **隐私优先** | 敏感代码不经过第三方云端 | 企业代码不能上传公有云 |
| **离线可用** | 设备间直连，无需互联网 | 内网环境、出差网络受限 |

##### 技术方案

```
┌─────────────────────────────────────────────────────────────┐
│                  场景B: 跨设备同步                            │
│              .hctx快照 + WebRTC P2P同步                      │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│     设备A (台式机)              设备B (笔记本)               │
│   ┌───────────────┐            ┌───────────────┐           │
│   │  HAJIMI IDE   │◄──────────►│  HAJIMI IDE   │           │
│   └───────┬───────┘   WebRTC   └───────┬───────┘           │
│           │      P2P DataChannel       │                    │
│           │    (加密直连，无服务器)      │                    │
│           ▼                            ▼                    │
│   ┌───────────────┐            ┌───────────────┐           │
│   │  .hctx快照    │◄──────────►│  .hctx快照    │           │
│   │  ├─会话上下文  │   同步      │  ├─会话上下文  │           │
│   │  ├─代码片段   │            │  ├─代码片段   │           │
│   │  ├─向量索引   │            │  ├─向量索引   │           │
│   │  └─元数据    │            │  └─元数据    │           │
│   └───────────────┘            └───────────────┘           │
│           │                            │                    │
│           ▼                            ▼                    │
│   ┌───────────────┐            ┌───────────────┐           │
│   │  LCR Workspace│            │  LCR Workspace│           │
│   │  - 热同步(Hot)│            │  - 热同步(Hot)│           │
│   │  - 温同步(Warm)│           │  - 温同步(Warm)│          │
│   │  - 冷同步(Cold)│           │  - 冷同步(Cold)│          │
│   └───────────────┘            └───────────────┘           │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

**核心组件**:
- **.hctx快照**: 标准化的上下文快照格式，包含会话、代码、向量索引
- **WebRTC P2P**: 点对点加密传输，无需中继服务器
- **四级Workspace**: 热/温/冷/冻四级状态管理，智能选择同步策略

**关键词验证**: ✅ **.hctx**、✅ **WebRTC**

---

#### 4.1.3 场景C - 团队审计（债务追踪）

> **用户画像**: 技术负责人，需要监控团队代码质量，追踪技术债务，确保合规性。

##### 场景描述

王经理是一个10人技术团队的负责人，他需要定期审查代码质量，识别技术债务，确保项目符合企业安全规范。传统的代码审查依赖人工，效率低下，且难以量化债务的严重程度。

##### 核心需求

| 需求维度 | 具体描述 | 痛点 |
|:---|:---|:---|
| **债务可视化** | 技术债务一目了然，可量化追踪 | 债务分散，难以整体把控 |
| **自动化审计** | 持续扫描代码，主动发现问题 | 人工审查滞后，遗漏风险 |
| **合规报告** | 生成标准化的审计报告 | 需要向上级汇报质量状况 |
| **风险评估** | 识别高风险的债务项 | 无法确定优先修复哪些债务 |

##### 技术方案

```
┌─────────────────────────────────────────────────────────────┐
│                  场景C: 团队审计                              │
│             压力怪Audit模式 + 债务报告                        │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│   ┌─────────────────────────────────────────────────────┐  │
│   │                 压力怪 Audit Agent                   │  │
│   │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  │  │
│   │  │ 安全审计    │  │ 合规检查    │  │ 债务追踪    │  │  │
│   │  │ Security    │  │ Compliance  │  │ Debt Track  │  │  │
│   │  └──────┬──────┘  └──────┬──────┘  └──────┬──────┘  │  │
│   │         │                │                │         │  │
│   │         └────────────────┼────────────────┘         │  │
│   │                          ▼                         │  │
│   │              ┌─────────────────────┐               │  │
│   │              │   审计规则引擎       │               │  │
│   │              │  - 代码规范检测      │               │  │
│   │              │  - 安全漏洞扫描      │               │  │
│   │              │  - 债务模式识别      │               │  │
│   │              └──────────┬──────────┘               │  │
│   └─────────────────────────┼──────────────────────────┘  │
│                             │                             │
│                             ▼                             │
│   ┌─────────────────────────────────────────────────────┐  │
│   │                  债务报告 Dashboard                  │  │
│   │  ┌─────────────────────────────────────────────┐   │  │
│   │  │  债务总览                                    │   │  │
│   │  │  ├─ 高优先级: 3项  [████░░░░░░] 30%          │   │  │
│   │  │  ├─ 中优先级: 5项  [██████░░░░] 50%          │   │  │
│   │  │  ├─ 低优先级: 2项  [████░░░░░░] 20%          │   │  │
│   │  │  └─ 健康度: 72/100                          │   │  │
│   │  └─────────────────────────────────────────────┘   │  │
│   │  ┌─────────────────────────────────────────────┐   │  │
│   │  │  债务清单                                    │   │  │
│   │  │  ├─ DEBT-LCR-001: B-01 Context Snapper      │   │  │
│   │  │  ├─ DEBT-LCR-002: B-02 Workspace v2.0       │   │  │
│   │  │  ├─ DEBT-ALICE-ML-001: Alice悬浮球优化       │   │  │
│   │  │  └─ ...                                     │   │  │
│   │  └─────────────────────────────────────────────┘   │  │
│   └─────────────────────────────────────────────────────┘  │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

**核心组件**:
- **压力怪Audit模式**: 自动化审计Agent，持续扫描代码库
- **债务追踪系统**: DEBT-xxx编号体系，可量化的债务管理
- **审计Dashboard**: 可视化债务分布和健康度评分

---

### 4.2 功能映射表

以下表格映射了核心功能与三大用户场景的对应关系，以及各功能的技术债务状态。

| 功能 | 场景A | 场景B | 场景C | 状态 | 债务 |
|:---|:---:|:---:|:---:|:---|:---|
| **LCR本地运行时** | ✅ | ⚠️ | ❌ | 已交付 | DEBT-LCR-001 |
| **.hctx快照** | ❌ | ✅ | ❌ | 已交付 | DEBT-LCR-002 |
| **WebRTC同步** | ❌ | ✅ | ❌ | 已交付 | DEBT-LCR-004 |
| **Alice悬浮球** | ✅ | ❌ | ❌ | 已交付 | DEBT-ALICE-ML-001 |
| **债务审计** | ❌ | ❌ | ✅ | 已交付 | - |

#### 图例说明

| 符号 | 含义 |
|:---:|:---|
| ✅ | **完全支持** - 该场景的核心功能 |
| ⚠️ | **部分支持** - 可用但非核心功能 |
| ❌ | **不适用** - 该场景不需要此功能 |

#### 功能详情

| 功能 | 适用场景 | 说明 |
|:---|:---|:---|
| **LCR本地运行时** | A, B | 场景A的核心支撑；场景B作为同步基础 |
| **.hctx快照** | B | 场景B的上下文序列化格式，跨设备同步的载体 |
| **WebRTC同步** | B | 场景B的P2P同步协议，实现设备直连 |
| **Alice悬浮球** | A | 场景A的轻量级UI，适合资源受限环境 |
| **债务审计** | C | 场景C的核心功能，团队治理的基础设施 |

#### 债务关联

| 债务编号 | 关联功能 | 影响场景 | 说明 |
|:---|:---|:---:|:---|
| DEBT-LCR-001 | LCR本地运行时 | A | 本地运行时性能优化债务 |
| DEBT-LCR-002 | .hctx快照 | B | 快照格式兼容性债务 |
| **DEBT-LCR-004** | WebRTC同步 | B | P2P连接稳定性债务 |
| **DEBT-ALICE-ML-001** | Alice悬浮球 | A | UI响应速度优化债务 |

---

## 附录：自测点验证

### [README-016] 场景A关键词验证

| 检查项 | 要求 | 验证方法 | 状态 |
|:---|:---|:---|:---:|
| 含"Termux" | 场景A描述中包含Termux关键词 | 文档审查 | ✅ |
| 含"1点额度" | 场景A描述中包含1点额度关键词 | 文档审查 | ✅ |

### [README-017] 场景B关键词验证

| 检查项 | 要求 | 验证方法 | 状态 |
|:---|:---|:---|:---:|
| 含".hctx" | 场景B描述中包含.hctx关键词 | 文档审查 | ✅ |
| 含"WebRTC" | 场景B描述中包含WebRTC关键词 | 文档审查 | ✅ |

### [README-018] 功能映射表债务编号验证

| 检查项 | 要求 | 验证方法 | 状态 |
|:---|:---|:---|:---:|
| 含DEBT-ALICE-ML-001 | 功能映射表包含DEBT-ALICE-ML-001 | 文档审查 | ✅ |
| 含DEBT-LCR-004 | 功能映射表包含DEBT-LCR-004 | 文档审查 | ✅ |

---

## 文档信息

| 属性 | 值 |
|:---|:---|
| **文档编号** | HAJIMI-v1.5.0-README-B-06 |
| **版本** | v1.0 |
| **日期** | 2026-02-17 |
| **作者** | Scenario 工作组 |
| **状态** | 已交付 |

---

*本文档作为 HAJIMI v1.5.0 README 白皮书化的第 4.1-4.2 节，遵循白皮书格式规范编写。*
