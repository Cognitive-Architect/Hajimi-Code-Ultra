#!/bin/bash
# =============================================================================
# Gitå½’æ¡£è„šæœ¬ - archive_legacy.sh
# åˆ›å»ºv2.1-legacyå½’æ¡£åˆ†æ”¯ï¼Œä¿ç•™å†å²ä»£ç 
# =============================================================================

set -e

echo "ğŸ”– å¼€å§‹åˆ›å»ºGitå½’æ¡£..."

# ç¡®ä¿åœ¨æ­£ç¡®çš„åˆ†æ”¯ä¸Š
echo "â–¶ åˆ‡æ¢åˆ°mainåˆ†æ”¯..."
git checkout main
git pull origin main

# åˆ›å»ºå½’æ¡£åˆ†æ”¯
echo "â–¶ åˆ›å»ºv2.1-legacyå½’æ¡£åˆ†æ”¯..."
git checkout -b v2.1-legacy

# åˆ›å»ºæœ€ç»ˆç‰ˆæœ¬æ ‡ç­¾
echo "â–¶ åˆ›å»ºv2.1.0-finalæ ‡ç­¾..."
git tag -a v2.1.0-final -m "Skills v2.1 æœ€ç»ˆç‰ˆæœ¬ - é‡å»ºå‰å½’æ¡£

å½’æ¡£ä¿¡æ¯:
- å½’æ¡£æ—¶é—´: $(date '+%Y-%m-%d %H:%M:%S')
- å½’æ¡£åŸå› : æŠ€æœ¯å€ºåŠ¡æ¸…ç®—ï¼Œé‡å»ºv3.0æ¶æ„
- åŒ…å«å†…å®¹: å®Œæ•´v2.1ä»£ç åº“
- ä¿ç•™æœŸé™: æ°¸ä¹…

æ­¤æ ‡ç­¾æ ‡è®°v2.1ç³»åˆ—çš„æœ€ç»ˆçŠ¶æ€ï¼Œç”¨äºå†å²è¿½æº¯ã€‚"

# æ¨é€åˆ†æ”¯å’Œæ ‡ç­¾
echo "â–¶ æ¨é€åˆ°è¿œç¨‹ä»“åº“..."
git push origin v2.1-legacy
git push origin v2.1.0-final

# è¿”å›mainåˆ†æ”¯
echo "â–¶ è¿”å›mainåˆ†æ”¯..."
git checkout main

echo "âœ… Gitå½’æ¡£å®Œæˆï¼"
echo ""
echo "å½’æ¡£ä¿¡æ¯:"
echo "  â€¢ åˆ†æ”¯: v2.1-legacy"
echo "  â€¢ æ ‡ç­¾: v2.1.0-final"
echo "  â€¢ å½’æ¡£æ—¶é—´: $(date '+%Y-%m-%d %H:%M:%S')"
echo ""
echo "æŸ¥çœ‹å½’æ¡£:"
echo "  git checkout v2.1-legacy"
echo "  git show v2.1.0-final"
